From bfff2564b939ff39fd50da0f64fb65566a85243d Mon Sep 17 00:00:00 2001
From: hovercats <hovercatswithlasereyes@protonmail.com>
Date: Thu, 2 May 2024 18:19:07 +0200
Subject: [PATCH 2/2] remove need for atk

this removes accessability altogether.
---
 gtk/a11y/gtkbooleancellaccessible.h      |   1 -
 gtk/a11y/gtkcellaccessible.h             |   4 -
 gtk/a11y/gtkcontaineraccessibleprivate.h |   2 -
 gtk/a11y/gtkimagecellaccessible.h        |   1 -
 gtk/a11y/gtkplugaccessible.h             |  44 --
 gtk/a11y/gtkrenderercellaccessible.h     |   4 -
 gtk/a11y/gtktextcellaccessible.h         |   1 -
 gtk/a11y/gtktoplevelaccessible.h         |   2 -
 gtk/a11y/gtkwidgetaccessible.h           |   4 -
 gtk/deprecated/gtkarrow.c                |   2 -
 gtk/deprecated/gtkcolorsel.c             |  36 --
 gtk/deprecated/gtkcolorseldialog.c       |   2 -
 gtk/deprecated/gtkfontsel.c              |  45 --
 gtk/deprecated/gtkhsv.c                  |   2 -
 gtk/deprecated/gtktearoffmenuitem.c      |   2 -
 gtk/gtk-autocleanups.h                   |   1 -
 gtk/gtk.h                                |   1 -
 gtk/gtkaccellabel.c                      |   2 -
 gtk/gtkaccessible.c                      | 185 --------
 gtk/gtkaccessible.h                      |  15 -
 gtk/gtkactionbar.c                       |   1 -
 gtk/gtkassistant.c                       |  71 ----
 gtk/gtkbox.c                             |   1 -
 gtk/gtkbutton.c                          |   1 -
 gtk/gtkcalendar.c                        |   1 -
 gtk/gtkcellrenderer.c                    |  37 --
 gtk/gtkcellrendererpixbuf.c              |   4 -
 gtk/gtkcellrenderertext.c                |   2 -
 gtk/gtkcellrenderertoggle.c              |   2 -
 gtk/gtkcheckbutton.c                     |   1 -
 gtk/gtkcheckmenuitem.c                   |   1 -
 gtk/gtkcolorchooserwidget.c              |  11 -
 gtk/gtkcolorplane.c                      |   9 -
 gtk/gtkcolorscale.c                      |  12 -
 gtk/gtkcolorswatch.c                     |   1 -
 gtk/gtkcombobox.c                        |  30 --
 gtk/gtkcombobox.h                        |   2 -
 gtk/gtkcontainer.c                       |   6 -
 gtk/gtkdialog.c                          |   2 -
 gtk/gtkdrawingarea.c                     |   2 -
 gtk/gtkentry.c                           |   1 -
 gtk/gtkentrycompletion.c                 |  18 -
 gtk/gtkexpander.c                        |   1 -
 gtk/gtkfilechooserdialog.c               |   2 -
 gtk/gtkfilechooserwidget.c               |   6 -
 gtk/gtkflowbox.c                         |   4 -
 gtk/gtkfontchooserdialog.c               |   2 -
 gtk/gtkfontchooserwidget.c               |   2 -
 gtk/gtkframe.c                           |   1 -
 gtk/gtkglarea.c                          |   2 -
 gtk/gtkheaderbar.c                       |  19 -
 gtk/gtkiconview.c                        |  39 --
 gtk/gtkimage.c                           |   1 -
 gtk/gtkinfobar.c                         |  38 --
 gtk/gtklabel.c                           |  12 -
 gtk/gtklevelbar.c                        |   1 -
 gtk/gtklinkbutton.c                      |   1 -
 gtk/gtklistbox.c                         |   6 -
 gtk/gtklockbutton.c                      |   4 -
 gtk/gtkmain.c                            |  15 -
 gtk/gtkmenu.c                            |   1 -
 gtk/gtkmenubar.c                         |   1 -
 gtk/gtkmenubutton.c                      |   1 -
 gtk/gtkmenuitem.c                        |   1 -
 gtk/gtkmenushell.c                       |   2 -
 gtk/gtkmessagedialog.c                   |  11 -
 gtk/gtkmodelbutton.c                     |  31 --
 gtk/gtkmodelmenuitem.c                   |  10 -
 gtk/gtknotebook.c                        |   1 -
 gtk/gtkpaned.c                           |   1 -
 gtk/gtkpango.c                           | 516 -----------------------
 gtk/gtkpango.h                           |  13 -
 gtk/gtkpathbar.c                         |   3 -
 gtk/gtkplug.c                            |   2 -
 gtk/gtkpopover.c                         |   1 -
 gtk/gtkprogressbar.c                     |   1 -
 gtk/gtkradiobutton.c                     |   1 -
 gtk/gtkradiomenuitem.c                   |   2 -
 gtk/gtkrange.c                           |   2 -
 gtk/gtkscale.c                           |   1 -
 gtk/gtkscalebutton.c                     |   1 -
 gtk/gtkscrollbar.c                       |   1 -
 gtk/gtkscrolledwindow.c                  |   1 -
 gtk/gtksearchentry.c                     |   6 -
 gtk/gtkseparator.c                       |   1 -
 gtk/gtkseparatormenuitem.c               |   1 -
 gtk/gtksocket.c                          |   2 -
 gtk/gtkspinbutton.c                      |   1 -
 gtk/gtkspinner.c                         |   1 -
 gtk/gtkstack.c                           |   5 -
 gtk/gtkstatusbar.c                       |   1 -
 gtk/gtkstylecontext.c                    |  57 ---
 gtk/gtkstylecontext.h                    |   1 -
 gtk/gtkstylecontextprivate.h             |   5 -
 gtk/gtkswitch.c                          |   7 -
 gtk/gtktextbuffer.c                      | 265 ------------
 gtk/gtktextbufferprivate.h               |   3 -
 gtk/gtktextview.c                        |   2 -
 gtk/gtktogglebutton.c                    |   1 -
 gtk/gtktoolbar.c                         |   2 -
 gtk/gtktoolbutton.c                      |   3 -
 gtk/gtktooltipwindow.c                   |   1 -
 gtk/gtktreeselection.c                   |   2 -
 gtk/gtktreeview.c                        |  42 --
 gtk/gtktreeviewcolumn.c                  |   6 -
 gtk/gtkviewport.c                        |   2 -
 gtk/gtkvolumebutton.c                    |   8 -
 gtk/gtkwidget.c                          | 469 --------------------
 gtk/gtkwidget.h                          |  15 -
 gtk/gtkwidgetprivate.h                   |   4 -
 110 files changed, 2246 deletions(-)

diff --git a/gtk/a11y/gtkbooleancellaccessible.h b/gtk/a11y/gtkbooleancellaccessible.h
index ba344e6..6300cfa 100644
--- a/gtk/a11y/gtkbooleancellaccessible.h
+++ b/gtk/a11y/gtkbooleancellaccessible.h
@@ -22,7 +22,6 @@
 #error "Only <gtk/gtk-a11y.h> can be included directly."
 #endif
 
-#include <atk/atk.h>
 #include <gtk/a11y/gtkrenderercellaccessible.h>
 
 G_BEGIN_DECLS
diff --git a/gtk/a11y/gtkcellaccessible.h b/gtk/a11y/gtkcellaccessible.h
index 1195a38..0a80c5f 100644
--- a/gtk/a11y/gtkcellaccessible.h
+++ b/gtk/a11y/gtkcellaccessible.h
@@ -22,7 +22,6 @@
 #error "Only <gtk/gtk-a11y.h> can be included directly."
 #endif
 
-#include <atk/atk.h>
 #include <gtk/gtk.h>
 
 G_BEGIN_DECLS
@@ -40,14 +39,11 @@ typedef struct _GtkCellAccessiblePrivate GtkCellAccessiblePrivate;
 
 struct _GtkCellAccessible
 {
-  GtkAccessible parent;
-
   GtkCellAccessiblePrivate *priv;
 };
 
 struct _GtkCellAccessibleClass
 {
-  GtkAccessibleClass parent_class;
   void (*update_cache) (GtkCellAccessible *cell,
                         gboolean           emit_signal);
 };
diff --git a/gtk/a11y/gtkcontaineraccessibleprivate.h b/gtk/a11y/gtkcontaineraccessibleprivate.h
index 4d02a73..baf5531 100644
--- a/gtk/a11y/gtkcontaineraccessibleprivate.h
+++ b/gtk/a11y/gtkcontaineraccessibleprivate.h
@@ -23,10 +23,8 @@
 G_BEGIN_DECLS
 
 void            _gtk_container_accessible_add_child     (GtkContainerAccessible *accessible,
-                                                         AtkObject              *child,
                                                          gint                    index);
 void            _gtk_container_accessible_remove_child  (GtkContainerAccessible *accessible,
-                                                         AtkObject              *child,
                                                          gint                    index);
 void            _gtk_container_accessible_add           (GtkWidget              *parent,
                                                          GtkWidget              *child);
diff --git a/gtk/a11y/gtkimagecellaccessible.h b/gtk/a11y/gtkimagecellaccessible.h
index 5ab1c22..bd0ee82 100644
--- a/gtk/a11y/gtkimagecellaccessible.h
+++ b/gtk/a11y/gtkimagecellaccessible.h
@@ -22,7 +22,6 @@
 #error "Only <gtk/gtk-a11y.h> can be included directly."
 #endif
 
-#include <atk/atk.h>
 #include <gtk/a11y/gtkrenderercellaccessible.h>
 
 G_BEGIN_DECLS
diff --git a/gtk/a11y/gtkplugaccessible.h b/gtk/a11y/gtkplugaccessible.h
index 5be8fe4..b9840af 100644
--- a/gtk/a11y/gtkplugaccessible.h
+++ b/gtk/a11y/gtkplugaccessible.h
@@ -24,48 +24,4 @@
 
 #include <gtk/a11y/gtkwindowaccessible.h>
 
-#if ATK_CHECK_VERSION(2,35,1)
-
-#define GTK_HAVE_ATK_PLUG_SET_CHILD
-
-G_BEGIN_DECLS
-
-#define GTK_TYPE_PLUG_ACCESSIBLE                         (gtk_plug_accessible_get_type ())
-#define GTK_PLUG_ACCESSIBLE(obj)                         (G_TYPE_CHECK_INSTANCE_CAST ((obj), GTK_TYPE_PLUG_ACCESSIBLE, GtkPlugAccessible))
-#define GTK_PLUG_ACCESSIBLE_CLASS(klass)                 (G_TYPE_CHECK_CLASS_CAST ((klass), GTK_TYPE_PLUG_ACCESSIBLE, GtkPlugAccessibleClass))
-#define GTK_IS_PLUG_ACCESSIBLE(obj)                      (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GTK_TYPE_PLUG_ACCESSIBLE))
-#define GTK_IS_PLUG_ACCESSIBLE_CLASS(klass)              (G_TYPE_CHECK_CLASS_TYPE ((klass), GTK_TYPE_PLUG_ACCESSIBLE))
-#define GTK_PLUG_ACCESSIBLE_GET_CLASS(obj)               (G_TYPE_INSTANCE_GET_CLASS ((obj), GTK_TYPE_PLUG_ACCESSIBLE, GtkPlugAccessibleClass))
-
-typedef struct _GtkPlugAccessible        GtkPlugAccessible;
-typedef struct _GtkPlugAccessibleClass   GtkPlugAccessibleClass;
-typedef struct _GtkPlugAccessiblePrivate GtkPlugAccessiblePrivate;
-
-/**
- * GtkPlugAccessible:
- *
- * Since: 3.24.30
- */
-struct _GtkPlugAccessible
-{
-  GtkWindowAccessible parent;
-
-  GtkPlugAccessiblePrivate *priv;
-};
-
-struct _GtkPlugAccessibleClass
-{
-  GtkWindowAccessibleClass parent_class;
-};
-
-GDK_AVAILABLE_IN_ALL
-GType gtk_plug_accessible_get_type (void);
-
-GDK_AVAILABLE_IN_ALL
-gchar *gtk_plug_accessible_get_id (GtkPlugAccessible *plug);
-
-G_END_DECLS
-
-#endif /* ATK_CHECK_VERSION(2,35,1) */
-
 #endif /* __GTK_PLUG_ACCESSIBLE_H__ */
diff --git a/gtk/a11y/gtkrenderercellaccessible.h b/gtk/a11y/gtkrenderercellaccessible.h
index ac39d89..2b97029 100644
--- a/gtk/a11y/gtkrenderercellaccessible.h
+++ b/gtk/a11y/gtkrenderercellaccessible.h
@@ -22,7 +22,6 @@
 #error "Only <gtk/gtk-a11y.h> can be included directly."
 #endif
 
-#include <atk/atk.h>
 #include <gtk/a11y/gtkcellaccessible.h>
 
 G_BEGIN_DECLS
@@ -53,9 +52,6 @@ struct _GtkRendererCellAccessibleClass
 GDK_AVAILABLE_IN_ALL
 GType      gtk_renderer_cell_accessible_get_type     (void);
 
-GDK_AVAILABLE_IN_ALL
-AtkObject *gtk_renderer_cell_accessible_new          (GtkCellRenderer * renderer);
-
 G_END_DECLS
 
 #endif /* __GTK_RENDERER_CELL_ACCESSIBLE_H__ */
diff --git a/gtk/a11y/gtktextcellaccessible.h b/gtk/a11y/gtktextcellaccessible.h
index 16a63b7..069fd42 100644
--- a/gtk/a11y/gtktextcellaccessible.h
+++ b/gtk/a11y/gtktextcellaccessible.h
@@ -22,7 +22,6 @@
 #error "Only <gtk/gtk-a11y.h> can be included directly."
 #endif
 
-#include <atk/atk.h>
 #include <gtk/a11y/gtkrenderercellaccessible.h>
 
 G_BEGIN_DECLS
diff --git a/gtk/a11y/gtktoplevelaccessible.h b/gtk/a11y/gtktoplevelaccessible.h
index 9c782b8..59d5372 100644
--- a/gtk/a11y/gtktoplevelaccessible.h
+++ b/gtk/a11y/gtktoplevelaccessible.h
@@ -22,8 +22,6 @@
 #error "Only <gtk/gtk-a11y.h> can be included directly."
 #endif
 
-#include <atk/atk.h>
-
 G_BEGIN_DECLS
 
 #define GTK_TYPE_TOPLEVEL_ACCESSIBLE               (gtk_toplevel_accessible_get_type ())
diff --git a/gtk/a11y/gtkwidgetaccessible.h b/gtk/a11y/gtkwidgetaccessible.h
index 37fd45b..a623081 100644
--- a/gtk/a11y/gtkwidgetaccessible.h
+++ b/gtk/a11y/gtkwidgetaccessible.h
@@ -39,15 +39,11 @@ typedef struct _GtkWidgetAccessiblePrivate GtkWidgetAccessiblePrivate;
 
 struct _GtkWidgetAccessible
 {
-  GtkAccessible parent;
-
   GtkWidgetAccessiblePrivate *priv;
 };
 
 struct _GtkWidgetAccessibleClass
 {
-  GtkAccessibleClass parent_class;
-
   /*
    * Signal handler for notify signal on GTK widget
    */
diff --git a/gtk/deprecated/gtkarrow.c b/gtk/deprecated/gtkarrow.c
index 3312ffc..e22f52c 100644
--- a/gtk/deprecated/gtkarrow.c
+++ b/gtk/deprecated/gtkarrow.c
@@ -139,8 +139,6 @@ gtk_arrow_class_init (GtkArrowClass *class)
                                                                P_("Amount of space used up by arrow"),
                                                                0.0, 1.0, 0.7,
                                                                GTK_PARAM_READABLE));
-
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_ARROW_ACCESSIBLE);
 }
 
 static void
diff --git a/gtk/deprecated/gtkcolorsel.c b/gtk/deprecated/gtkcolorsel.c
index 8152983..af1e9db 100644
--- a/gtk/deprecated/gtkcolorsel.c
+++ b/gtk/deprecated/gtkcolorsel.c
@@ -206,10 +206,6 @@ static void     default_noscreen_change_palette_func    (const GdkColor    *colo
 static void     default_change_palette_func             (GdkScreen         *screen,
                                                          const GdkColor    *colors,
                                                          gint               n_colors);
-static void     make_control_relations                  (AtkObject         *atk_obj,
-                                                         GtkWidget         *widget);
-static void     make_all_relations                      (AtkObject         *atk_obj,
-                                                         GtkColorSelectionPrivate *priv);
 
 static void     hsv_changed                             (GtkWidget         *hsv,
                                                          gpointer           data);
@@ -398,7 +394,6 @@ gtk_color_selection_init (GtkColorSelection *colorsel)
   GtkWidget *picker_image;
   gint i, j;
   GtkColorSelectionPrivate *priv;
-  AtkObject *atk_obj;
   GList *focus_chain = NULL;
 
   gtk_orientable_set_orientation (GTK_ORIENTABLE (colorsel),
@@ -572,14 +567,6 @@ gtk_color_selection_init (GtkColorSelection *colorsel)
       gtk_widget_hide (priv->palette_frame);
     }
 
-  atk_obj = gtk_widget_get_accessible (priv->triangle_colorsel);
-  if (GTK_IS_ACCESSIBLE (atk_obj))
-    {
-      atk_object_set_name (atk_obj, _("Color Wheel"));
-      atk_object_set_role (gtk_widget_get_accessible (GTK_WIDGET (colorsel)), ATK_ROLE_COLOR_CHOOSER);
-      make_all_relations (atk_obj, priv);
-    }
-
   gtk_widget_pop_composite_child ();
 }
 
@@ -3057,26 +3044,3 @@ gtk_color_selection_set_change_palette_with_screen_hook (GtkColorSelectionChange
 
   return old;
 }
-
-static void
-make_control_relations (AtkObject *atk_obj,
-                        GtkWidget *widget)
-{
-  AtkObject *obj;
-
-  obj = gtk_widget_get_accessible (widget);
-  atk_object_add_relationship (atk_obj, ATK_RELATION_CONTROLLED_BY, obj);
-  atk_object_add_relationship (obj, ATK_RELATION_CONTROLLER_FOR, atk_obj);
-}
-
-static void
-make_all_relations (AtkObject                *atk_obj,
-                    GtkColorSelectionPrivate *priv)
-{
-  make_control_relations (atk_obj, priv->hue_spinbutton);
-  make_control_relations (atk_obj, priv->sat_spinbutton);
-  make_control_relations (atk_obj, priv->val_spinbutton);
-  make_control_relations (atk_obj, priv->red_spinbutton);
-  make_control_relations (atk_obj, priv->green_spinbutton);
-  make_control_relations (atk_obj, priv->blue_spinbutton);
-}
diff --git a/gtk/deprecated/gtkcolorseldialog.c b/gtk/deprecated/gtkcolorseldialog.c
index 7ff28ec..19daf9d 100644
--- a/gtk/deprecated/gtkcolorseldialog.c
+++ b/gtk/deprecated/gtkcolorseldialog.c
@@ -158,8 +158,6 @@ gtk_color_selection_dialog_class_init (GtkColorSelectionDialogClass *klass)
 						     P_("The help button of the dialog."),
 						     GTK_TYPE_WIDGET,
 						     G_PARAM_READABLE));
-
-  gtk_widget_class_set_accessible_role (widget_class, ATK_ROLE_COLOR_CHOOSER);
 }
 
 static void
diff --git a/gtk/deprecated/gtkfontsel.c b/gtk/deprecated/gtkfontsel.c
index 7812e75..67e3a8e 100644
--- a/gtk/deprecated/gtkfontsel.c
+++ b/gtk/deprecated/gtkfontsel.c
@@ -35,8 +35,6 @@
 #include <glib/gprintf.h>
 #include <string.h>
 
-#include <atk/atk.h>
-
 #include "gtkbutton.h"
 #include "gtkcellrenderertext.h"
 #include "gtkentry.h"
@@ -335,7 +333,6 @@ gtk_font_selection_init (GtkFontSelection *fontsel)
   GtkListStore *model;
   GtkTreeViewColumn *column;
   GList *focus_chain = NULL;
-  AtkObject *atk_obj;
 
   fontsel->priv = gtk_font_selection_get_instance_private (fontsel);
   priv = fontsel->priv;
@@ -528,46 +525,6 @@ gtk_font_selection_init (GtkFontSelection *fontsel)
 
   g_signal_connect (gtk_tree_view_get_selection (GTK_TREE_VIEW (priv->size_list)), "changed",
 		    G_CALLBACK (gtk_font_selection_select_size), fontsel);
-  atk_obj = gtk_widget_get_accessible (priv->size_list);
-  if (GTK_IS_ACCESSIBLE (atk_obj))
-    {
-      /* Accessibility support is enabled.
-       * Make the label ATK_RELATON_LABEL_FOR for the size list as well.
-       */
-      AtkObject *atk_label;
-      AtkRelationSet *relation_set;
-      AtkRelation *relation;
-      AtkObject *obj_array[1];
-
-      atk_label = gtk_widget_get_accessible (label);
-      relation_set = atk_object_ref_relation_set (atk_obj);
-      relation = atk_relation_set_get_relation_by_type (relation_set, ATK_RELATION_LABELLED_BY);
-      if (relation)
-        {
-          atk_relation_add_target (relation, atk_label);
-        }
-      else 
-        {
-          obj_array[0] = atk_label;
-          relation = atk_relation_new (obj_array, 1, ATK_RELATION_LABELLED_BY);
-          atk_relation_set_add (relation_set, relation);
-        }
-      g_object_unref (relation_set);
-
-      relation_set = atk_object_ref_relation_set (atk_label);
-      relation = atk_relation_set_get_relation_by_type (relation_set, ATK_RELATION_LABEL_FOR);
-      if (relation)
-        {
-          atk_relation_add_target (relation, atk_obj);
-        }
-      else 
-        {
-          obj_array[0] = atk_obj;
-          relation = atk_relation_new (obj_array, 1, ATK_RELATION_LABEL_FOR);
-          atk_relation_set_add (relation_set, relation);
-        }
-      g_object_unref (relation_set);
-    }
 
   vbox = gtk_box_new (GTK_ORIENTATION_VERTICAL, 6);
   gtk_widget_show (vbox);
@@ -1651,8 +1608,6 @@ static void
 gtk_font_selection_dialog_class_init (GtkFontSelectionDialogClass *klass)
 {
   GtkWidgetClass *widget_class = GTK_WIDGET_CLASS (klass);
-
-  gtk_widget_class_set_accessible_role (widget_class, ATK_ROLE_FONT_CHOOSER);
 }
 
 static void
diff --git a/gtk/deprecated/gtkhsv.c b/gtk/deprecated/gtkhsv.c
index 6e30d5e..f76969f 100644
--- a/gtk/deprecated/gtkhsv.c
+++ b/gtk/deprecated/gtkhsv.c
@@ -160,8 +160,6 @@ gtk_hsv_class_init (GtkHSVClass *class)
   widget_class->focus = gtk_hsv_focus;
   widget_class->grab_broken_event = gtk_hsv_grab_broken;
 
-  gtk_widget_class_set_accessible_role (widget_class, ATK_ROLE_COLOR_CHOOSER);
-
   hsv_class->move = gtk_hsv_move;
 
   hsv_signals[CHANGED] =
diff --git a/gtk/deprecated/gtktearoffmenuitem.c b/gtk/deprecated/gtktearoffmenuitem.c
index 87fdb80..2cbced9 100644
--- a/gtk/deprecated/gtktearoffmenuitem.c
+++ b/gtk/deprecated/gtktearoffmenuitem.c
@@ -110,8 +110,6 @@ gtk_tearoff_menu_item_class_init (GtkTearoffMenuItemClass *klass)
   widget_class->get_preferred_height = gtk_tearoff_menu_item_get_preferred_height;
   widget_class->parent_set = gtk_tearoff_menu_item_parent_set;
 
-  gtk_widget_class_set_accessible_role (widget_class, ATK_ROLE_TEAR_OFF_MENU_ITEM);
-
   menu_item_class->activate = gtk_tearoff_menu_item_activate;
 }
 
diff --git a/gtk/gtk-autocleanups.h b/gtk/gtk-autocleanups.h
index 5c942ce..70f2d5f 100644
--- a/gtk/gtk-autocleanups.h
+++ b/gtk/gtk-autocleanups.h
@@ -21,7 +21,6 @@
 
 #ifndef __GI_SCANNER__
 
-G_DEFINE_AUTOPTR_CLEANUP_FUNC(GtkAccessible, g_object_unref)
 G_DEFINE_AUTOPTR_CLEANUP_FUNC(GtkActionBar, g_object_unref)
 G_DEFINE_AUTOPTR_CLEANUP_FUNC(GtkActionable, g_object_unref)
 G_DEFINE_AUTOPTR_CLEANUP_FUNC(GtkAdjustment, g_object_unref)
diff --git a/gtk/gtk.h b/gtk/gtk.h
index c08454c..5d48f88 100644
--- a/gtk/gtk.h
+++ b/gtk/gtk.h
@@ -32,7 +32,6 @@
 #include <gtk/gtkaccelgroup.h>
 #include <gtk/gtkaccellabel.h>
 #include <gtk/gtkaccelmap.h>
-#include <gtk/gtkaccessible.h>
 #include <gtk/gtkactionable.h>
 #include <gtk/gtkactionbar.h>
 #include <gtk/gtkadjustment.h>
diff --git a/gtk/gtkaccellabel.c b/gtk/gtkaccellabel.c
index 75b27a8..f734783 100644
--- a/gtk/gtkaccellabel.c
+++ b/gtk/gtkaccellabel.c
@@ -167,8 +167,6 @@ gtk_accel_label_class_init (GtkAccelLabelClass *class)
   widget_class->get_preferred_width = gtk_accel_label_get_preferred_width;
   widget_class->destroy = gtk_accel_label_destroy;
 
-  gtk_widget_class_set_accessible_role (widget_class, ATK_ROLE_ACCEL_LABEL);
-
   class->signal_quote1 = g_strdup ("<:");
   class->signal_quote2 = g_strdup (":>");
 
diff --git a/gtk/gtkaccessible.c b/gtk/gtkaccessible.c
index 9efbb0c..e16fb88 100644
--- a/gtk/gtkaccessible.c
+++ b/gtk/gtkaccessible.c
@@ -50,175 +50,6 @@ enum {
   PROP_WIDGET
 };
 
-static void gtk_accessible_real_connect_widget_destroyed (GtkAccessible *accessible);
-
-G_DEFINE_TYPE_WITH_PRIVATE (GtkAccessible, gtk_accessible, ATK_TYPE_OBJECT)
-
-static void
-gtk_accessible_set_property (GObject      *object,
-                             guint         prop_id,
-                             const GValue *value,
-                             GParamSpec   *pspec)
-{
-  GtkAccessible *accessible = GTK_ACCESSIBLE (object);
-
-  switch (prop_id)
-    {
-    case PROP_WIDGET:
-      gtk_accessible_set_widget (accessible, g_value_get_object (value));
-      break;
-    default:
-      G_OBJECT_WARN_INVALID_PROPERTY_ID (object, prop_id, pspec);
-      break;
-    }
-}
-
-static void
-gtk_accessible_get_property (GObject    *object,
-                             guint       prop_id,
-                             GValue     *value,
-                             GParamSpec *pspec)
-{
-  GtkAccessible *accessible = GTK_ACCESSIBLE (object);
-  GtkAccessiblePrivate *priv = accessible->priv;
-
-  switch (prop_id)
-    {
-    case PROP_WIDGET:
-      g_value_set_object (value, priv->widget);
-      break;
-    default:
-      G_OBJECT_WARN_INVALID_PROPERTY_ID (object, prop_id, pspec);
-      break;
-    }
-}
-
-static void
-gtk_accessible_init (GtkAccessible *accessible)
-{
-  accessible->priv = gtk_accessible_get_instance_private (accessible);
-}
-
-static AtkStateSet *
-gtk_accessible_ref_state_set (AtkObject *object)
-{
-  GtkAccessible *accessible = GTK_ACCESSIBLE (object);
-  AtkStateSet *state_set;
-
-  state_set = ATK_OBJECT_CLASS (gtk_accessible_parent_class)->ref_state_set (object);
-
-  if (accessible->priv->widget == NULL)
-    atk_state_set_add_state (state_set, ATK_STATE_DEFUNCT);
-
-  return state_set;
-}
-
-static void
-gtk_accessible_real_widget_set (GtkAccessible *accessible)
-{
-  atk_object_notify_state_change (ATK_OBJECT (accessible), ATK_STATE_DEFUNCT, FALSE);
-}
-
-static void
-gtk_accessible_real_widget_unset (GtkAccessible *accessible)
-{
-  atk_object_notify_state_change (ATK_OBJECT (accessible), ATK_STATE_DEFUNCT, TRUE);
-}
-
-static void
-gtk_accessible_dispose (GObject *object)
-{
-  GtkAccessible *accessible = GTK_ACCESSIBLE (object);
-  
-  gtk_accessible_set_widget (accessible, NULL);
-
-  G_OBJECT_CLASS (gtk_accessible_parent_class)->dispose (object);
-}
-
-static void
-gtk_accessible_class_init (GtkAccessibleClass *klass)
-{
-  GObjectClass *gobject_class = G_OBJECT_CLASS (klass);
-  AtkObjectClass *atkobject_class = ATK_OBJECT_CLASS (klass);
-
-  klass->connect_widget_destroyed = gtk_accessible_real_connect_widget_destroyed;
-  klass->widget_set = gtk_accessible_real_widget_set;
-  klass->widget_unset = gtk_accessible_real_widget_unset;
-
-  atkobject_class->ref_state_set = gtk_accessible_ref_state_set;
-  gobject_class->get_property = gtk_accessible_get_property;
-  gobject_class->set_property = gtk_accessible_set_property;
-  gobject_class->dispose = gtk_accessible_dispose;
-
-  g_object_class_install_property (gobject_class,
-				   PROP_WIDGET,
-				   g_param_spec_object ("widget",
-							P_("Widget"),
-							P_("The widget referenced by this accessible."),
-							GTK_TYPE_WIDGET,
-							G_PARAM_READWRITE));
-}
-
-/**
- * gtk_accessible_set_widget:
- * @accessible: a #GtkAccessible
- * @widget: (allow-none): a #GtkWidget or %NULL to unset
- *
- * Sets the #GtkWidget corresponding to the #GtkAccessible.
- *
- * @accessible will not hold a reference to @widget.
- * It is the caller’s responsibility to ensure that when @widget
- * is destroyed, the widget is unset by calling this function
- * again with @widget set to %NULL.
- *
- * Since: 2.22
- */
-void
-gtk_accessible_set_widget (GtkAccessible *accessible,
-                           GtkWidget     *widget)
-{
-  GtkAccessiblePrivate *priv;
-  GtkAccessibleClass *klass;
-
-  g_return_if_fail (GTK_IS_ACCESSIBLE (accessible));
-
-  priv = accessible->priv;
-  klass = GTK_ACCESSIBLE_GET_CLASS (accessible);
-
-  if (priv->widget == widget)
-    return;
-
-  if (priv->widget)
-    klass->widget_unset (accessible);
-
-  priv->widget = widget;
-
-  if (widget)
-    klass->widget_set (accessible);
-
-  g_object_notify (G_OBJECT (accessible), "widget");
-}
-
-/**
- * gtk_accessible_get_widget:
- * @accessible: a #GtkAccessible
- *
- * Gets the #GtkWidget corresponding to the #GtkAccessible.
- * The returned widget does not have a reference added, so
- * you do not need to unref it.
- *
- * Returns: (nullable) (transfer none): pointer to the #GtkWidget
- *     corresponding to the #GtkAccessible, or %NULL.
- *
- * Since: 2.22
- */
-GtkWidget*
-gtk_accessible_get_widget (GtkAccessible *accessible)
-{
-  g_return_val_if_fail (GTK_IS_ACCESSIBLE (accessible), NULL);
-
-  return accessible->priv->widget;
-}
 
 /**
  * gtk_accessible_connect_widget_destroyed:
@@ -242,19 +73,3 @@ gtk_accessible_connect_widget_destroyed (GtkAccessible *accessible)
     class->connect_widget_destroyed (accessible);
 }
 
-static void
-gtk_accessible_widget_destroyed (GtkWidget     *widget,
-                                 GtkAccessible *accessible)
-{
-  gtk_accessible_set_widget (accessible, NULL);
-}
-
-static void
-gtk_accessible_real_connect_widget_destroyed (GtkAccessible *accessible)
-{
-  GtkAccessiblePrivate *priv = accessible->priv;
-
-  if (priv->widget)
-    g_signal_connect (priv->widget, "destroy",
-                      G_CALLBACK (gtk_accessible_widget_destroyed), accessible);
-}
diff --git a/gtk/gtkaccessible.h b/gtk/gtkaccessible.h
index 9c2229b..85a198d 100644
--- a/gtk/gtkaccessible.h
+++ b/gtk/gtkaccessible.h
@@ -22,34 +22,22 @@
 #error "Only <gtk/gtk.h> can be included directly."
 #endif
 
-#include <atk/atk.h>
 #include <gtk/gtkwidget.h>
 
 G_BEGIN_DECLS
 
-#define GTK_TYPE_ACCESSIBLE                  (gtk_accessible_get_type ())
-#define GTK_ACCESSIBLE(obj)                  (G_TYPE_CHECK_INSTANCE_CAST ((obj), GTK_TYPE_ACCESSIBLE, GtkAccessible))
-#define GTK_ACCESSIBLE_CLASS(klass)          (G_TYPE_CHECK_CLASS_CAST ((klass), GTK_TYPE_ACCESSIBLE, GtkAccessibleClass))
-#define GTK_IS_ACCESSIBLE(obj)               (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GTK_TYPE_ACCESSIBLE))
-#define GTK_IS_ACCESSIBLE_CLASS(klass)       (G_TYPE_CHECK_CLASS_TYPE ((klass), GTK_TYPE_ACCESSIBLE))
-#define GTK_ACCESSIBLE_GET_CLASS(obj)        (G_TYPE_INSTANCE_GET_CLASS ((obj), GTK_TYPE_ACCESSIBLE, GtkAccessibleClass))
-
 typedef struct _GtkAccessible        GtkAccessible;
 typedef struct _GtkAccessiblePrivate GtkAccessiblePrivate;
 typedef struct _GtkAccessibleClass   GtkAccessibleClass;
 
 struct _GtkAccessible
 {
-  AtkObject parent;
-
   /*< private >*/
   GtkAccessiblePrivate *priv;
 };
 
 struct _GtkAccessibleClass
 {
-  AtkObjectClass parent_class;
-
   void (*connect_widget_destroyed) (GtkAccessible *accessible);
 
   void (*widget_set)               (GtkAccessible *accessible);
@@ -59,9 +47,6 @@ struct _GtkAccessibleClass
   void (*_gtk_reserved4) (void);
 };
 
-GDK_AVAILABLE_IN_ALL
-GType      gtk_accessible_get_type                 (void) G_GNUC_CONST;
-
 GDK_AVAILABLE_IN_ALL
 void       gtk_accessible_set_widget               (GtkAccessible *accessible,
                                                     GtkWidget     *widget);
diff --git a/gtk/gtkactionbar.c b/gtk/gtkactionbar.c
index effd494..ea86299 100644
--- a/gtk/gtkactionbar.c
+++ b/gtk/gtkactionbar.c
@@ -351,7 +351,6 @@ gtk_action_bar_class_init (GtkActionBarClass *klass)
   gtk_widget_class_bind_template_child_private (widget_class, GtkActionBar, box);
   gtk_widget_class_bind_template_child_private (widget_class, GtkActionBar, revealer);
 
-  gtk_widget_class_set_accessible_role (widget_class, ATK_ROLE_PANEL);
   gtk_widget_class_set_css_name (widget_class, "actionbar");
 }
 
diff --git a/gtk/gtkassistant.c b/gtk/gtkassistant.c
index bad21b3..4a09a7e 100644
--- a/gtk/gtkassistant.c
+++ b/gtk/gtkassistant.c
@@ -58,8 +58,6 @@
 
 #include "config.h"
 
-#include <atk/atk.h>
-
 #include "gtkassistant.h"
 
 #include "gtkbutton.h"
@@ -405,8 +403,6 @@ gtk_assistant_class_init (GtkAssistantClass *class)
   widget_class->unmap = gtk_assistant_unmap;
   widget_class->delete_event = gtk_assistant_delete_event;
 
-  gtk_widget_class_set_accessible_type (widget_class, _gtk_assistant_accessible_get_type ());
-
   container_class->add = gtk_assistant_add;
   container_class->remove = gtk_assistant_remove;
   container_class->set_child_property = gtk_assistant_set_child_property;
@@ -2534,76 +2530,9 @@ gtk_assistant_commit (GtkAssistant *assistant)
 typedef GtkWindowAccessible      GtkAssistantAccessible;
 typedef GtkWindowAccessibleClass GtkAssistantAccessibleClass;
 
-G_DEFINE_TYPE (GtkAssistantAccessible, _gtk_assistant_accessible, GTK_TYPE_WINDOW_ACCESSIBLE);
-
-static gint
-gtk_assistant_accessible_get_n_children (AtkObject *accessible)
-{
-  GtkWidget *widget;
-
-  widget = gtk_accessible_get_widget (GTK_ACCESSIBLE (accessible));
-  if (widget == NULL)
-    return 0;
-
-  return g_list_length (GTK_ASSISTANT (widget)->priv->pages) + 2;
-}
-
-static AtkObject *
-gtk_assistant_accessible_ref_child (AtkObject *accessible,
-                                    gint       index)
-{
-  GtkAssistant *assistant;
-  GtkAssistantPrivate *priv;
-  GtkWidget *widget, *child;
-  gint n_pages;
-  AtkObject *obj;
-  const gchar *title;
-
-  widget = gtk_accessible_get_widget (GTK_ACCESSIBLE (accessible));
-  if (widget == NULL)
-    return NULL;
-
-  assistant = GTK_ASSISTANT (widget);
-  priv = assistant->priv;
-  n_pages = g_list_length (priv->pages);
-
-  if (index < 0)
-    return NULL;
-  else if (index < n_pages)
-    {
-      GtkAssistantPage *page = g_list_nth_data (priv->pages, index);
-
-      child = page->page;
-      title = gtk_assistant_get_page_title (assistant, child);
-    }
-  else if (index == n_pages)
-    {
-      child = priv->action_area;
-      title = NULL;
-    }
-  else if (index == n_pages + 1)
-    {
-      child = priv->headerbar;
-      title = NULL;
-    }
-  else
-    return NULL;
-
-  obj = gtk_widget_get_accessible (child);
-
-  if (title)
-    atk_object_set_name (obj, title);
-
-  return g_object_ref (obj);
-}
-
 static void
 _gtk_assistant_accessible_class_init (GtkAssistantAccessibleClass *klass)
 {
-  AtkObjectClass *atk_class = ATK_OBJECT_CLASS (klass);
-
-  atk_class->get_n_children = gtk_assistant_accessible_get_n_children;
-  atk_class->ref_child = gtk_assistant_accessible_ref_child;
 }
 
 static void
diff --git a/gtk/gtkbox.c b/gtk/gtkbox.c
index c372f9c..161bb54 100644
--- a/gtk/gtkbox.c
+++ b/gtk/gtkbox.c
@@ -370,7 +370,6 @@ gtk_box_class_init (GtkBoxClass *class)
 
   gtk_container_class_install_child_properties (container_class, LAST_CHILD_PROP, child_props);
 
-  gtk_widget_class_set_accessible_role (widget_class, ATK_ROLE_FILLER);
   gtk_widget_class_set_css_name (widget_class, "box");
 }
 
diff --git a/gtk/gtkbutton.c b/gtk/gtkbutton.c
index 26b7ffb..c9744a8 100644
--- a/gtk/gtkbutton.c
+++ b/gtk/gtkbutton.c
@@ -630,7 +630,6 @@ gtk_button_class_init (GtkButtonClass *klass)
 							     2,
 							     GTK_PARAM_READABLE | G_PARAM_DEPRECATED));
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_BUTTON_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "button");
 }
 
diff --git a/gtk/gtkcalendar.c b/gtk/gtkcalendar.c
index 5f1a5d5..2c2e141 100644
--- a/gtk/gtkcalendar.c
+++ b/gtk/gtkcalendar.c
@@ -680,7 +680,6 @@ gtk_calendar_class_init (GtkCalendarClass *class)
                   NULL,
                   G_TYPE_NONE, 0);
 
-  gtk_widget_class_set_accessible_role (widget_class, ATK_ROLE_CALENDAR);
   gtk_widget_class_set_css_name (widget_class, "calendar");
 }
 
diff --git a/gtk/gtkcellrenderer.c b/gtk/gtkcellrenderer.c
index d10cd09..c3e68d3 100644
--- a/gtk/gtkcellrenderer.c
+++ b/gtk/gtkcellrenderer.c
@@ -443,8 +443,6 @@ G_GNUC_END_IGNORE_DEPRECATIONS
 
   if (GtkCellRenderer_private_offset != 0)
     g_type_class_adjust_private_offset (class, &GtkCellRenderer_private_offset);
-
-  gtk_cell_renderer_class_set_accessible_type (class, GTK_TYPE_RENDERER_CELL_ACCESSIBLE);
 }
 
 static void
@@ -1850,38 +1848,3 @@ gtk_cell_renderer_get_state (GtkCellRenderer      *cell,
   return state;
 }
 
-/**
- * gtk_cell_renderer_class_set_accessible_type:
- * @renderer_class: class to set the accessible type for
- * @type: The object type that implements the accessible for @widget_class.
- *     The type must be a subtype of #GtkRendererCellAccessible
- *
- * Sets the type to be used for creating accessibles for cells rendered by
- * cell renderers of @renderer_class. Note that multiple accessibles will
- * be created.
- *
- * This function should only be called from class init functions of cell
- * renderers.
- **/
-void
-gtk_cell_renderer_class_set_accessible_type (GtkCellRendererClass *renderer_class,
-                                             GType                 type)
-{
-  GtkCellRendererClassPrivate *priv;
-
-  g_return_if_fail (GTK_IS_CELL_RENDERER_CLASS (renderer_class));
-  g_return_if_fail (g_type_is_a (type, GTK_TYPE_RENDERER_CELL_ACCESSIBLE));
-
-  priv = renderer_class->priv;
-
-  priv->accessible_type = type;
-}
-
-GType
-_gtk_cell_renderer_get_accessible_type (GtkCellRenderer *renderer)
-{
-  g_return_val_if_fail (GTK_IS_CELL_RENDERER (renderer), GTK_TYPE_RENDERER_CELL_ACCESSIBLE);
-
-  return GTK_CELL_RENDERER_GET_CLASS (renderer)->priv->accessible_type;
-}
-
diff --git a/gtk/gtkcellrendererpixbuf.c b/gtk/gtkcellrendererpixbuf.c
index e24f956..f4c9baf 100644
--- a/gtk/gtkcellrendererpixbuf.c
+++ b/gtk/gtkcellrendererpixbuf.c
@@ -282,10 +282,6 @@ gtk_cell_renderer_pixbuf_class_init (GtkCellRendererPixbufClass *class)
                                                         P_("The GIcon being displayed"),
                                                         G_TYPE_ICON,
                                                         GTK_PARAM_READWRITE));
-
-
-
-  gtk_cell_renderer_class_set_accessible_type (cell_class, GTK_TYPE_IMAGE_CELL_ACCESSIBLE);
 }
 
 static void
diff --git a/gtk/gtkcellrenderertext.c b/gtk/gtkcellrenderertext.c
index 32eb155..aed7c6d 100644
--- a/gtk/gtkcellrenderertext.c
+++ b/gtk/gtkcellrenderertext.c
@@ -692,8 +692,6 @@ G_GNUC_END_IGNORE_DEPRECATIONS
   g_signal_set_va_marshaller (text_cell_renderer_signals [EDITED],
                               G_OBJECT_CLASS_TYPE (object_class),
                               _gtk_marshal_VOID__STRING_STRINGv);
-
-  gtk_cell_renderer_class_set_accessible_type (cell_class, GTK_TYPE_TEXT_CELL_ACCESSIBLE);
 }
 
 static void
diff --git a/gtk/gtkcellrenderertoggle.c b/gtk/gtkcellrenderertoggle.c
index ea5aebf..ca75f9d 100644
--- a/gtk/gtkcellrenderertoggle.c
+++ b/gtk/gtkcellrenderertoggle.c
@@ -196,8 +196,6 @@ gtk_cell_renderer_toggle_class_init (GtkCellRendererToggleClass *class)
 		  NULL,
 		  G_TYPE_NONE, 1,
 		  G_TYPE_STRING);
-
-  gtk_cell_renderer_class_set_accessible_type (cell_class, GTK_TYPE_BOOLEAN_CELL_ACCESSIBLE);
 }
 
 static void
diff --git a/gtk/gtkcheckbutton.c b/gtk/gtkcheckbutton.c
index a274524..2a89fb3 100644
--- a/gtk/gtkcheckbutton.c
+++ b/gtk/gtkcheckbutton.c
@@ -253,7 +253,6 @@ gtk_check_button_class_init (GtkCheckButtonClass *class)
 							     INDICATOR_SPACING,
 							     GTK_PARAM_READABLE|G_PARAM_DEPRECATED));
 
-  gtk_widget_class_set_accessible_role (widget_class, ATK_ROLE_CHECK_BOX);
   gtk_widget_class_set_css_name (widget_class, "checkbutton");
 }
 
diff --git a/gtk/gtkcheckmenuitem.c b/gtk/gtkcheckmenuitem.c
index b3b32d2..ef71fb5 100644
--- a/gtk/gtkcheckmenuitem.c
+++ b/gtk/gtkcheckmenuitem.c
@@ -271,7 +271,6 @@ gtk_check_menu_item_class_init (GtkCheckMenuItemClass *klass)
                   NULL,
                   G_TYPE_NONE, 0);
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_CHECK_MENU_ITEM_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "menuitem");
 }
 
diff --git a/gtk/gtkcolorchooserwidget.c b/gtk/gtkcolorchooserwidget.c
index 9fca31d..1aea899 100644
--- a/gtk/gtkcolorchooserwidget.c
+++ b/gtk/gtkcolorchooserwidget.c
@@ -344,7 +344,6 @@ add_palette (GtkColorChooserWidget  *cc,
 {
   GtkWidget *grid;
   GtkWidget *p;
-  AtkObject *atk_obj;
   gint line, pos;
   gint i;
   gint left, right;
@@ -373,11 +372,8 @@ add_palette (GtkColorChooserWidget  *cc,
   for (i = 0; i < n_colors; i++)
     {
       p = gtk_color_swatch_new ();
-      atk_obj = gtk_widget_get_accessible (p);
       if (names)
         {
-          atk_object_set_name (atk_obj,
-                               g_dpgettext2 (GETTEXT_PACKAGE, "Color name", names[i]));
         }
       else
         {
@@ -385,7 +381,6 @@ add_palette (GtkColorChooserWidget  *cc,
 
           name = accessible_color_name (&colors[i]);
           text = g_strdup_printf (_("Color: %s"), name);
-          atk_object_set_name (atk_obj, text);
           g_free (text);
           g_free (name);
         }
@@ -513,7 +508,6 @@ gtk_color_chooser_widget_init (GtkColorChooserWidget *cc)
   GVariant *variant;
   GVariantIter iter;
   gboolean selected;
-  AtkObject *atk_obj;
   gchar *text, *name;
 
   cc->priv = gtk_color_chooser_widget_get_instance_private (cc);
@@ -537,9 +531,6 @@ gtk_color_chooser_widget_init (GtkColorChooserWidget *cc)
 
   cc->priv->button = button = gtk_color_swatch_new ();
   gtk_widget_set_name (button, "add-color-button");
-  atk_obj = gtk_widget_get_accessible (button);
-  atk_object_set_name (atk_obj, _("Custom color"));
-  atk_object_set_description (atk_obj, _("Create a custom color"));
   connect_button_signals (button, cc);
   gtk_color_swatch_set_icon (GTK_COLOR_SWATCH (button), "list-add-symbolic");
   gtk_color_swatch_set_selectable (GTK_COLOR_SWATCH (button), FALSE);
@@ -556,10 +547,8 @@ gtk_color_chooser_widget_init (GtkColorChooserWidget *cc)
       p = gtk_color_swatch_new ();
       gtk_color_swatch_set_rgba (GTK_COLOR_SWATCH (p), &color);
       gtk_color_swatch_set_can_drop (GTK_COLOR_SWATCH (p), TRUE);
-      atk_obj = gtk_widget_get_accessible (p);
       name = accessible_color_name (&color);
       text = g_strdup_printf (_("Custom color %d: %s"), i, name);
-      atk_object_set_name (atk_obj, text);
       g_free (text);
       g_free (name);
       connect_custom_signals (p, cc);
diff --git a/gtk/gtkcolorplane.c b/gtk/gtkcolorplane.c
index aa964bb..8217b9a 100644
--- a/gtk/gtkcolorplane.c
+++ b/gtk/gtkcolorplane.c
@@ -392,8 +392,6 @@ plane_drag_gesture_end (GtkGestureDrag *gesture,
 static void
 gtk_color_plane_init (GtkColorPlane *plane)
 {
-  AtkObject *atk_obj;
-
   plane->priv = gtk_color_plane_get_instance_private (plane);
 
   gtk_widget_set_can_focus (GTK_WIDGET (plane), TRUE);
@@ -403,13 +401,6 @@ gtk_color_plane_init (GtkColorPlane *plane)
                                              | GDK_BUTTON_RELEASE_MASK
                                              | GDK_POINTER_MOTION_MASK);
 
-  atk_obj = gtk_widget_get_accessible (GTK_WIDGET (plane));
-  if (GTK_IS_ACCESSIBLE (atk_obj))
-    {
-      atk_object_set_name (atk_obj, _("Color Plane"));
-      atk_object_set_role (atk_obj, ATK_ROLE_COLOR_CHOOSER);
-    }
-
   plane->priv->drag_gesture = gtk_gesture_drag_new (GTK_WIDGET (plane));
   g_signal_connect (plane->priv->drag_gesture, "drag-begin",
 		    G_CALLBACK (plane_drag_gesture_begin), plane);
diff --git a/gtk/gtkcolorscale.c b/gtk/gtkcolorscale.c
index be1123d..47fad0d 100644
--- a/gtk/gtkcolorscale.c
+++ b/gtk/gtkcolorscale.c
@@ -200,19 +200,7 @@ static void
 scale_set_type (GtkColorScale     *scale,
                 GtkColorScaleType  type)
 {
-  AtkObject *atk_obj;
-
   scale->priv->type = type;
-
-  atk_obj = gtk_widget_get_accessible (GTK_WIDGET (scale));
-  if (GTK_IS_ACCESSIBLE (atk_obj))
-    {
-      if (type == GTK_COLOR_SCALE_HUE)
-        atk_object_set_name (atk_obj, C_("Color channel", "Hue"));
-      else if (type == GTK_COLOR_SCALE_ALPHA)
-        atk_object_set_name (atk_obj, C_("Color channel", "Alpha"));
-      atk_object_set_role (atk_obj, ATK_ROLE_COLOR_CHOOSER);
-    }
 }
 
 static void
diff --git a/gtk/gtkcolorswatch.c b/gtk/gtkcolorswatch.c
index 106a19b..a5e9bb7 100644
--- a/gtk/gtkcolorswatch.c
+++ b/gtk/gtkcolorswatch.c
@@ -725,7 +725,6 @@ gtk_color_swatch_class_init (GtkColorSwatchClass *class)
       g_param_spec_boolean ("has-menu", P_("Has Menu"), P_("Whether the swatch should offer customization"),
                             TRUE, GTK_PARAM_READWRITE));
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_COLOR_SWATCH_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "colorswatch");
 }
 
diff --git a/gtk/gtkcombobox.c b/gtk/gtkcombobox.c
index ef4996c..8c93248 100644
--- a/gtk/gtkcombobox.c
+++ b/gtk/gtkcombobox.c
@@ -1255,7 +1255,6 @@ gtk_combo_box_class_init (GtkComboBoxClass *klass)
   gtk_widget_class_bind_template_child_internal_private (widget_class, GtkComboBox, arrow);
   gtk_widget_class_bind_template_callback (widget_class, gtk_combo_box_button_toggled);
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_COMBO_BOX_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "combobox");
 }
 
@@ -4640,35 +4639,6 @@ gtk_combo_box_get_popup_fixed_width (GtkComboBox *combo_box)
 }
 
 
-/**
- * gtk_combo_box_get_popup_accessible:
- * @combo_box: a #GtkComboBox
- *
- * Gets the accessible object corresponding to the combo box’s popup.
- *
- * This function is mostly intended for use by accessibility technologies;
- * applications should have little use for it.
- *
- * Returns: (transfer none): the accessible object corresponding
- *     to the combo box’s popup.
- *
- * Since: 2.6
- */
-AtkObject *
-gtk_combo_box_get_popup_accessible (GtkComboBox *combo_box)
-{
-  GtkComboBoxPrivate *priv;
-
-  g_return_val_if_fail (GTK_IS_COMBO_BOX (combo_box), NULL);
-
-  priv = combo_box->priv;
-
-  if (priv->popup_widget)
-    return gtk_widget_get_accessible (priv->popup_widget);
-
-  return NULL;
-}
-
 /**
  * gtk_combo_box_get_row_separator_func: (skip)
  * @combo_box: a #GtkComboBox
diff --git a/gtk/gtkcombobox.h b/gtk/gtkcombobox.h
index c886983..6835e9f 100644
--- a/gtk/gtkcombobox.h
+++ b/gtk/gtkcombobox.h
@@ -181,8 +181,6 @@ void          gtk_combo_box_popup_for_device (GtkComboBox     *combo_box,
                                               GdkDevice       *device);
 GDK_AVAILABLE_IN_ALL
 void          gtk_combo_box_popdown          (GtkComboBox     *combo_box);
-GDK_AVAILABLE_IN_ALL
-AtkObject *   gtk_combo_box_get_popup_accessible (GtkComboBox *combo_box);
 
 GDK_AVAILABLE_IN_ALL
 gint          gtk_combo_box_get_id_column        (GtkComboBox *combo_box);
diff --git a/gtk/gtkcontainer.c b/gtk/gtkcontainer.c
index 435a233..c69f265 100644
--- a/gtk/gtkcontainer.c
+++ b/gtk/gtkcontainer.c
@@ -591,8 +591,6 @@ gtk_container_class_init (GtkContainerClass *class)
 
   if (GtkContainer_private_offset != 0)
     g_type_class_adjust_private_offset (class, &GtkContainer_private_offset);
-
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_CONTAINER_ACCESSIBLE);
 }
 
 static void
@@ -1875,8 +1873,6 @@ gtk_container_add (GtkContainer *container,
     }
 
   g_signal_emit (container, container_signals[ADD], 0, widget);
-
-  _gtk_container_accessible_add (GTK_WIDGET (container), widget);
 }
 
 /**
@@ -1906,8 +1902,6 @@ gtk_container_remove (GtkContainer *container,
 
   g_signal_emit (container, container_signals[REMOVE], 0, widget);
 
-  _gtk_container_accessible_remove (GTK_WIDGET (container), widget);
-
   g_object_unref (widget);
   g_object_unref (container);
 }
diff --git a/gtk/gtkdialog.c b/gtk/gtkdialog.c
index 0e58ac4..dd87df4 100644
--- a/gtk/gtkdialog.c
+++ b/gtk/gtkdialog.c
@@ -533,8 +533,6 @@ gtk_dialog_class_init (GtkDialogClass *class)
   widget_class->map = gtk_dialog_map;
   widget_class->style_updated = gtk_dialog_style_updated;
 
-  gtk_widget_class_set_accessible_role (widget_class, ATK_ROLE_DIALOG);
-
   class->close = gtk_dialog_close;
 
   /**
diff --git a/gtk/gtkdrawingarea.c b/gtk/gtkdrawingarea.c
index 261bf34..7a5b6e3 100644
--- a/gtk/gtkdrawingarea.c
+++ b/gtk/gtkdrawingarea.c
@@ -135,8 +135,6 @@ gtk_drawing_area_class_init (GtkDrawingAreaClass *class)
   widget_class->realize = gtk_drawing_area_realize;
   widget_class->size_allocate = gtk_drawing_area_size_allocate;
   widget_class->style_updated = gtk_drawing_area_style_updated;
-
-  gtk_widget_class_set_accessible_role (widget_class, ATK_ROLE_DRAWING_AREA);
 }
 
 static void
diff --git a/gtk/gtkentry.c b/gtk/gtkentry.c
index 4078855..7dd9f1a 100644
--- a/gtk/gtkentry.c
+++ b/gtk/gtkentry.c
@@ -2125,7 +2125,6 @@ gtk_entry_class_init (GtkEntryClass *class)
   gtk_binding_entry_add_signal (binding_set, GDK_KEY_semicolon, GDK_CONTROL_MASK,
                                 "insert-emoji", 0);
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_ENTRY_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "entry");
 }
 
diff --git a/gtk/gtkentrycompletion.c b/gtk/gtkentrycompletion.c
index ea159fe..0c04e53 100644
--- a/gtk/gtkentrycompletion.c
+++ b/gtk/gtkentrycompletion.c
@@ -2634,30 +2634,12 @@ static void
 set_accessible_relation (GtkWidget *window,
                          GtkWidget *entry)
 {
-  AtkObject *window_accessible;
-  AtkObject *entry_accessible;
-
-  window_accessible = gtk_widget_get_accessible (window);
-  entry_accessible = gtk_widget_get_accessible (entry);
-
-  atk_object_add_relationship (window_accessible,
-                               ATK_RELATION_POPUP_FOR,
-                               entry_accessible);
 }
 
 static void
 unset_accessible_relation (GtkWidget *window,
                            GtkWidget *entry)
 {
-  AtkObject *window_accessible;
-  AtkObject *entry_accessible;
-
-  window_accessible = gtk_widget_get_accessible (window);
-  entry_accessible = gtk_widget_get_accessible (entry);
-
-  atk_object_remove_relationship (window_accessible,
-                                  ATK_RELATION_POPUP_FOR,
-                                  entry_accessible);
 }
 
 static void
diff --git a/gtk/gtkexpander.c b/gtk/gtkexpander.c
index 8cfbdb3..78f30d9 100644
--- a/gtk/gtkexpander.c
+++ b/gtk/gtkexpander.c
@@ -427,7 +427,6 @@ gtk_expander_class_init (GtkExpanderClass *klass)
                   NULL,
                   G_TYPE_NONE, 0);
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_EXPANDER_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "expander");
 }
 
diff --git a/gtk/gtkfilechooserdialog.c b/gtk/gtkfilechooserdialog.c
index db1d8f6..e577f8e 100644
--- a/gtk/gtkfilechooserdialog.c
+++ b/gtk/gtkfilechooserdialog.c
@@ -265,8 +265,6 @@ gtk_file_chooser_dialog_class_init (GtkFileChooserDialogClass *class)
   widget_class->unmap = gtk_file_chooser_dialog_unmap;
   widget_class->size_allocate = gtk_file_chooser_dialog_size_allocate;
 
-  gtk_widget_class_set_accessible_role (widget_class, ATK_ROLE_FILE_CHOOSER);
-
   _gtk_file_chooser_install_properties (gobject_class);
 
   /* Bind class to template
diff --git a/gtk/gtkfilechooserwidget.c b/gtk/gtkfilechooserwidget.c
index ab531f7..46acc87 100644
--- a/gtk/gtkfilechooserwidget.c
+++ b/gtk/gtkfilechooserwidget.c
@@ -8758,7 +8758,6 @@ gtk_file_chooser_widget_class_init (GtkFileChooserWidgetClass *class)
   gtk_widget_class_bind_template_callback (widget_class, rename_file_rename_clicked);
   gtk_widget_class_bind_template_callback (widget_class, rename_file_end);
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_FILE_CHOOSER_WIDGET_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "filechooser");
 }
 
@@ -8767,7 +8766,6 @@ post_process_ui (GtkFileChooserWidget *impl)
 {
   GtkTreeSelection *selection;
   GtkCellRenderer *cell;
-  AtkObject *atk_obj;
   GList *cells;
   GFile *file;
 
@@ -8824,10 +8822,6 @@ post_process_ui (GtkFileChooserWidget *impl)
    */
   set_icon_cell_renderer_fixed_size (impl);
 
-  atk_obj = gtk_widget_get_accessible (impl->priv->browse_new_folder_button);
-  if (GTK_IS_ACCESSIBLE (atk_obj))
-    atk_object_set_name (atk_obj, _("Create Folder"));
-
   gtk_popover_set_default_widget (GTK_POPOVER (impl->priv->new_folder_popover), impl->priv->new_folder_create_button);
   gtk_popover_set_default_widget (GTK_POPOVER (impl->priv->rename_file_popover), impl->priv->rename_file_rename_button);
   gtk_popover_set_relative_to (GTK_POPOVER (impl->priv->rename_file_popover), impl->priv->browse_files_tree_view);
diff --git a/gtk/gtkflowbox.c b/gtk/gtkflowbox.c
index cd7bd83..9abf11f 100644
--- a/gtk/gtkflowbox.c
+++ b/gtk/gtkflowbox.c
@@ -635,7 +635,6 @@ gtk_flow_box_child_class_init (GtkFlowBoxChildClass *class)
                   G_TYPE_NONE, 0);
   widget_class->activate_signal = child_signals[CHILD_ACTIVATE];
 
-  gtk_widget_class_set_accessible_role (widget_class, ATK_ROLE_LIST_ITEM);
   gtk_widget_class_set_css_name (widget_class, "flowboxchild");
 }
 
@@ -1025,7 +1024,6 @@ gtk_flow_box_update_cursor (GtkFlowBox      *box,
   BOX_PRIV (box)->cursor_child = child;
   gtk_widget_grab_focus (GTK_WIDGET (child));
   gtk_widget_queue_draw (GTK_WIDGET (child));
-  _gtk_flow_box_accessible_update_cursor (GTK_WIDGET (box), GTK_WIDGET (child));
 }
 
 static void
@@ -3645,7 +3643,6 @@ gtk_flow_box_move_cursor (GtkFlowBox      *box,
 static void
 gtk_flow_box_selected_children_changed (GtkFlowBox *box)
 {
-  _gtk_flow_box_accessible_selection_changed (GTK_WIDGET (box));
 }
 
 /* GObject implementation {{{2 */
@@ -4100,7 +4097,6 @@ gtk_flow_box_class_init (GtkFlowBoxClass *class)
   gtk_binding_entry_add_signal (binding_set, GDK_KEY_a, GDK_CONTROL_MASK | GDK_SHIFT_MASK,
                                 "unselect-all", 0);
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_FLOW_BOX_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "flowbox");
 }
 
diff --git a/gtk/gtkfontchooserdialog.c b/gtk/gtkfontchooserdialog.c
index 723412f..9b2b349 100644
--- a/gtk/gtkfontchooserdialog.c
+++ b/gtk/gtkfontchooserdialog.c
@@ -22,8 +22,6 @@
 #include <glib/gprintf.h>
 #include <string.h>
 
-#include <atk/atk.h>
-
 #include "gtkfontchooserdialog.h"
 #include "gtkfontchooser.h"
 #include "gtkfontchooserwidget.h"
diff --git a/gtk/gtkfontchooserwidget.c b/gtk/gtkfontchooserwidget.c
index 50f3b2f..a610e3e 100644
--- a/gtk/gtkfontchooserwidget.c
+++ b/gtk/gtkfontchooserwidget.c
@@ -21,8 +21,6 @@
 #include <glib/gprintf.h>
 #include <string.h>
 
-#include <atk/atk.h>
-
 #include "gtkfontchooserwidget.h"
 #include "gtkfontchooserwidgetprivate.h"
 
diff --git a/gtk/gtkframe.c b/gtk/gtkframe.c
index 8ae7054..7ddcd45 100644
--- a/gtk/gtkframe.c
+++ b/gtk/gtkframe.c
@@ -282,7 +282,6 @@ gtk_frame_class_init (GtkFrameClass *class)
 
   class->compute_child_allocation = gtk_frame_real_compute_child_allocation;
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_FRAME_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "frame");
 }
 
diff --git a/gtk/gtkglarea.c b/gtk/gtkglarea.c
index 802303e..145e5ad 100644
--- a/gtk/gtkglarea.c
+++ b/gtk/gtkglarea.c
@@ -766,8 +766,6 @@ gtk_gl_area_class_init (GtkGLAreaClass *klass)
   widget_class->size_allocate = gtk_gl_area_size_allocate;
   widget_class->draw = gtk_gl_area_draw;
 
-  gtk_widget_class_set_accessible_role (widget_class, ATK_ROLE_DRAWING_AREA);
-
   /**
    * GtkGLArea:context:
    *
diff --git a/gtk/gtkheaderbar.c b/gtk/gtkheaderbar.c
index 0ef94e3..5c32fc6 100644
--- a/gtk/gtkheaderbar.c
+++ b/gtk/gtkheaderbar.c
@@ -351,7 +351,6 @@ _gtk_header_bar_update_window_buttons (GtkHeaderBar *bar)
             {
               GtkWidget *button = NULL;
               GtkWidget *image = NULL;
-              AtkObject *accessible;
 
               if (strcmp (t[j], "icon") == 0 &&
                   is_sovereign_window)
@@ -386,10 +385,6 @@ _gtk_header_bar_update_window_buttons (GtkHeaderBar *bar)
                   gtk_widget_set_can_focus (button, FALSE);
                   gtk_widget_show_all (button);
 
-                  accessible = gtk_widget_get_accessible (button);
-                  if (GTK_IS_ACCESSIBLE (accessible))
-                    atk_object_set_name (accessible, _("Application menu"));
-
                   priv->titlebar_icon = image;
                   if (!_gtk_header_bar_update_window_icon (bar, window))
                     gtk_image_set_from_icon_name (GTK_IMAGE (priv->titlebar_icon),
@@ -409,10 +404,6 @@ _gtk_header_bar_update_window_buttons (GtkHeaderBar *bar)
                   gtk_widget_show_all (button);
                   g_signal_connect_swapped (button, "clicked",
                                             G_CALLBACK (gtk_window_iconify), window);
-
-                  accessible = gtk_widget_get_accessible (button);
-                  if (GTK_IS_ACCESSIBLE (accessible))
-                    atk_object_set_name (accessible, _("Minimize"));
                 }
               else if (strcmp (t[j], "maximize") == 0 &&
                        gtk_window_get_resizable (window) &&
@@ -433,10 +424,6 @@ _gtk_header_bar_update_window_buttons (GtkHeaderBar *bar)
                   gtk_widget_show_all (button);
                   g_signal_connect_swapped (button, "clicked",
                                             G_CALLBACK (_gtk_window_toggle_maximized), window);
-
-                  accessible = gtk_widget_get_accessible (button);
-                  if (GTK_IS_ACCESSIBLE (accessible))
-                    atk_object_set_name (accessible, maximized ? _("Restore") : _("Maximize"));
                 }
               else if (strcmp (t[j], "close") == 0 &&
                        gtk_window_get_deletable (window))
@@ -452,10 +439,6 @@ _gtk_header_bar_update_window_buttons (GtkHeaderBar *bar)
                   gtk_widget_show_all (button);
                   g_signal_connect_swapped (button, "clicked",
                                             G_CALLBACK (gtk_window_close), window);
-
-                  accessible = gtk_widget_get_accessible (button);
-                  if (GTK_IS_ACCESSIBLE (accessible))
-                    atk_object_set_name (accessible, _("Close"));
                 }
 
               if (button)
@@ -2118,8 +2101,6 @@ gtk_header_bar_class_init (GtkHeaderBarClass *class)
 
   g_object_class_install_properties (object_class, LAST_PROP, header_bar_props);
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_HEADER_BAR_ACCESSIBLE);
-  gtk_widget_class_set_accessible_role (widget_class, ATK_ROLE_PANEL);
   gtk_widget_class_set_css_name (widget_class, "headerbar");
 }
 
diff --git a/gtk/gtkiconview.c b/gtk/gtkiconview.c
index 735695e..2fdb814 100644
--- a/gtk/gtkiconview.c
+++ b/gtk/gtkiconview.c
@@ -965,7 +965,6 @@ gtk_icon_view_class_init (GtkIconViewClass *klass)
   gtk_icon_view_add_move_binding (binding_set, GDK_KEY_KP_Left, 0, 
 				  GTK_MOVEMENT_VISUAL_POSITIONS, -1);
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_ICON_VIEW_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "iconview");
 }
 
@@ -2125,19 +2124,6 @@ static void
 gtk_icon_view_item_selected_changed (GtkIconView      *icon_view,
                                      GtkIconViewItem  *item)
 {
-  AtkObject *obj;
-  AtkObject *item_obj;
-
-  obj = gtk_widget_get_accessible (GTK_WIDGET (icon_view));
-  if (obj != NULL)
-    {
-      item_obj = atk_object_ref_accessible_child (obj, item->index);
-      if (item_obj != NULL)
-        {
-          atk_object_notify_state_change (item_obj, ATK_STATE_SELECTED, item->selected);
-          g_object_unref (item_obj);
-        }
-    }
 }
 
 static void
@@ -2939,8 +2925,6 @@ gtk_icon_view_adjustment_changed (GtkAdjustment *adjustment,
 
       if (icon_view->priv->doing_rubberband)
         gtk_icon_view_update_rubberband (GTK_WIDGET (icon_view));
-
-      _gtk_icon_view_accessible_adjustment_changed (icon_view);
     }
 }
 
@@ -3238,10 +3222,6 @@ _gtk_icon_view_set_cursor_item (GtkIconView     *icon_view,
                                 GtkIconViewItem *item,
                                 GtkCellRenderer *cursor_cell)
 {
-  AtkObject *obj;
-  AtkObject *item_obj;
-  AtkObject *cursor_item_obj;
-
   /* When hitting this path from keynav, the focus cell is
    * already set, we dont need to notify the atk object
    * but we still need to queue the draw here (in the case
@@ -3253,17 +3233,10 @@ _gtk_icon_view_set_cursor_item (GtkIconView     *icon_view,
       (cursor_cell == NULL || cursor_cell == gtk_cell_area_get_focus_cell (icon_view->priv->cell_area)))
     return;
 
-  obj = gtk_widget_get_accessible (GTK_WIDGET (icon_view));
   if (icon_view->priv->cursor_item != NULL)
     {
       gtk_icon_view_queue_draw_item (icon_view, icon_view->priv->cursor_item);
-      if (obj != NULL)
-        {
-          cursor_item_obj = atk_object_ref_accessible_child (obj, icon_view->priv->cursor_item->index);
-          if (cursor_item_obj != NULL)
-            atk_object_notify_state_change (cursor_item_obj, ATK_STATE_FOCUSED, FALSE);
         }
-    }
   icon_view->priv->cursor_item = item;
 
   if (cursor_cell)
@@ -3274,18 +3247,6 @@ _gtk_icon_view_set_cursor_item (GtkIconView     *icon_view,
       if (!gtk_cell_area_get_focus_cell (icon_view->priv->cell_area))
 	gtk_cell_area_focus (icon_view->priv->cell_area, GTK_DIR_TAB_FORWARD);
     }
-  
-  /* Notify that accessible focus object has changed */
-  item_obj = atk_object_ref_accessible_child (obj, item->index);
-
-  if (item_obj != NULL)
-    {
-      G_GNUC_BEGIN_IGNORE_DEPRECATIONS;
-      atk_focus_tracker_notify (item_obj);
-      G_GNUC_END_IGNORE_DEPRECATIONS;
-      atk_object_notify_state_change (item_obj, ATK_STATE_FOCUSED, TRUE);
-      g_object_unref (item_obj); 
-    }
 }
 
 
diff --git a/gtk/gtkimage.c b/gtk/gtkimage.c
index 5d6e715..df60ede 100644
--- a/gtk/gtkimage.c
+++ b/gtk/gtkimage.c
@@ -402,7 +402,6 @@ gtk_image_class_init (GtkImageClass *class)
 
   g_object_class_install_properties (gobject_class, NUM_PROPERTIES, image_props);
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_IMAGE_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "image");
 }
 
diff --git a/gtk/gtkinfobar.c b/gtk/gtkinfobar.c
index 8eb89ff..6ee5bc1 100644
--- a/gtk/gtkinfobar.c
+++ b/gtk/gtkinfobar.c
@@ -1276,7 +1276,6 @@ gtk_info_bar_set_message_type (GtkInfoBar     *info_bar,
   if (priv->message_type != message_type)
     {
       GtkStyleContext *context;
-      AtkObject *atk_obj;
       const char *type_class[] = {
         GTK_STYLE_CLASS_INFO,
         GTK_STYLE_CLASS_WARNING,
@@ -1294,43 +1293,6 @@ gtk_info_bar_set_message_type (GtkInfoBar     *info_bar,
 
       gtk_widget_queue_draw (GTK_WIDGET (info_bar));
 
-      atk_obj = gtk_widget_get_accessible (GTK_WIDGET (info_bar));
-      if (GTK_IS_ACCESSIBLE (atk_obj))
-        {
-          const char *name = NULL;
-
-          atk_object_set_role (atk_obj, ATK_ROLE_INFO_BAR);
-
-          switch (message_type)
-            {
-            case GTK_MESSAGE_INFO:
-              name = _("Information");
-              break;
-
-            case GTK_MESSAGE_QUESTION:
-              name = _("Question");
-              break;
-
-            case GTK_MESSAGE_WARNING:
-              name = _("Warning");
-              break;
-
-            case GTK_MESSAGE_ERROR:
-              name = _("Error");
-              break;
-
-            case GTK_MESSAGE_OTHER:
-              break;
-
-            default:
-              g_warning ("Unknown GtkMessageType %u", message_type);
-              break;
-            }
-
-          if (name)
-            atk_object_set_name (atk_obj, name);
-        }
-
       if (type_class[priv->message_type])
         gtk_style_context_add_class (context, type_class[priv->message_type]);
 
diff --git a/gtk/gtklabel.c b/gtk/gtklabel.c
index 8ba764c..b011d7b 100644
--- a/gtk/gtklabel.c
+++ b/gtk/gtklabel.c
@@ -1194,8 +1194,6 @@ gtk_label_class_init (GtkLabelClass *class)
   gtk_binding_entry_add_signal (binding_set, GDK_KEY_KP_Enter, 0,
 				"activate-current-link", 0);
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_LABEL_ACCESSIBLE);
-
   gtk_widget_class_set_css_name (widget_class, "label");
 
   quark_shortcuts_connected = g_quark_from_static_string ("gtk-label-shortcuts-connected");
@@ -2146,12 +2144,9 @@ gtk_label_set_text_internal (GtkLabel *label,
       return;
     }
 
-  _gtk_label_accessible_text_deleted (label);
   g_free (priv->text);
   priv->text = str;
 
-  _gtk_label_accessible_text_inserted (label);
-
   gtk_label_select_region_index (label, 0, 0);
 }
 
@@ -2680,7 +2675,6 @@ gtk_label_set_markup_internal (GtkLabel    *label,
     {
       gtk_label_ensure_select_info (label);
       priv->select_info->links = g_list_reverse (links);
-      _gtk_label_accessible_update_links (label);
       gtk_label_ensure_has_tooltip (label);
     }
 
@@ -4818,7 +4812,6 @@ gtk_label_grab_focus (GtkWidget *widget)
                 {
                   priv->select_info->selection_anchor = link->start;
                   priv->select_info->selection_end = link->start;
-                  _gtk_label_accessible_focus_link_changed (label);
                   break;
                 }
             }
@@ -4851,7 +4844,6 @@ gtk_label_focus (GtkWidget        *widget,
                     {
                       info->selection_anchor = focus_link->start;
                       info->selection_end = focus_link->start;
-                      _gtk_label_accessible_focus_link_changed (label);
                     }
                 }
             }
@@ -4882,7 +4874,6 @@ gtk_label_focus (GtkWidget        *widget,
                 if (!range_is_in_ellipsis (label, link->start, link->end))
                   {
                     gtk_label_select_region_index (label, link->start, link->start);
-                    _gtk_label_accessible_focus_link_changed (label);
                     return TRUE;
                   }
               }
@@ -4897,7 +4888,6 @@ gtk_label_focus (GtkWidget        *widget,
                 if (!range_is_in_ellipsis (label, link->start, link->end))
                   {
                     gtk_label_select_region_index (label, link->start, link->start);
-                    _gtk_label_accessible_focus_link_changed (label);
                     return TRUE;
                   }
               }
@@ -4951,7 +4941,6 @@ gtk_label_focus (GtkWidget        *widget,
           focus_link = l->data;
           info->selection_anchor = focus_link->start;
           info->selection_end = focus_link->start;
-          _gtk_label_accessible_focus_link_changed (label);
           gtk_widget_queue_draw (widget);
 
           return TRUE;
@@ -6733,7 +6722,6 @@ gtk_label_clear_links (GtkLabel *label)
   priv->select_info->links = NULL;
   priv->select_info->active_link = NULL;
 
-  _gtk_label_accessible_update_links (label);
 }
 
 static gboolean
diff --git a/gtk/gtklevelbar.c b/gtk/gtklevelbar.c
index 6e3ac12..296eb28 100644
--- a/gtk/gtklevelbar.c
+++ b/gtk/gtklevelbar.c
@@ -1136,7 +1136,6 @@ gtk_level_bar_class_init (GtkLevelBarClass *klass)
 
   g_object_class_install_properties (oclass, LAST_PROPERTY, properties);
 
-  gtk_widget_class_set_accessible_type (wclass, GTK_TYPE_LEVEL_BAR_ACCESSIBLE);
   gtk_widget_class_set_css_name (wclass, "levelbar");
 }
 
diff --git a/gtk/gtklinkbutton.c b/gtk/gtklinkbutton.c
index 103348a..3476b79 100644
--- a/gtk/gtklinkbutton.c
+++ b/gtk/gtklinkbutton.c
@@ -209,7 +209,6 @@ gtk_link_button_class_init (GtkLinkButtonClass *klass)
                   _gtk_marshal_BOOLEAN__VOID,
                   G_TYPE_BOOLEAN, 0);
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_LINK_BUTTON_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "button");
 }
 
diff --git a/gtk/gtklistbox.c b/gtk/gtklistbox.c
index efc3434..11b0b98 100644
--- a/gtk/gtklistbox.c
+++ b/gtk/gtklistbox.c
@@ -447,8 +447,6 @@ gtk_list_box_class_init (GtkListBoxClass *klass)
   GtkContainerClass *container_class = GTK_CONTAINER_CLASS (klass);
   GtkBindingSet *binding_set;
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_LIST_BOX_ACCESSIBLE);
-
   object_class->get_property = gtk_list_box_get_property;
   object_class->set_property = gtk_list_box_set_property;
   object_class->finalize = gtk_list_box_finalize;
@@ -903,7 +901,6 @@ gtk_list_box_unselect_all (GtkListBox *box)
 static void
 gtk_list_box_selected_rows_changed (GtkListBox *box)
 {
-  _gtk_list_box_accessible_selection_changed (box);
 }
 
 /**
@@ -1559,7 +1556,6 @@ gtk_list_box_update_cursor (GtkListBox    *box,
   if (grab_focus)
     gtk_widget_grab_focus (GTK_WIDGET (row));
   gtk_widget_queue_draw (GTK_WIDGET (row));
-  _gtk_list_box_accessible_update_cursor (box, row);
 }
 
 static GtkListBox *
@@ -3866,8 +3862,6 @@ gtk_list_box_row_class_init (GtkListBoxRowClass *klass)
   GObjectClass *object_class = G_OBJECT_CLASS (klass);
   GtkWidgetClass *widget_class = GTK_WIDGET_CLASS (klass);
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_LIST_BOX_ROW_ACCESSIBLE);
-
   object_class->get_property = gtk_list_box_row_get_property;
   object_class->set_property = gtk_list_box_row_set_property;
   object_class->finalize = gtk_list_box_row_finalize;
diff --git a/gtk/gtklockbutton.c b/gtk/gtklockbutton.c
index 6750f6e..4086e67 100644
--- a/gtk/gtklockbutton.c
+++ b/gtk/gtklockbutton.c
@@ -189,12 +189,10 @@ gtk_lock_button_set_property (GObject      *object,
 
     case PROP_TEXT_LOCK:
       gtk_label_set_text (GTK_LABEL (priv->label_lock), g_value_get_string (value));
-      _gtk_lock_button_accessible_name_changed (button);
       break;
 
     case PROP_TEXT_UNLOCK:
       gtk_label_set_text (GTK_LABEL (priv->label_unlock), g_value_get_string (value));
-      _gtk_lock_button_accessible_name_changed (button);
       break;
 
     case PROP_TOOLTIP_LOCK:
@@ -322,7 +320,6 @@ gtk_lock_button_class_init (GtkLockButtonClass *klass)
   gtk_widget_class_bind_template_child_private (widget_class, GtkLockButton, label_unlock);
   gtk_widget_class_bind_template_child_private (widget_class, GtkLockButton, stack);
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_LOCK_BUTTON_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "button");
 }
 
@@ -387,7 +384,6 @@ update_state (GtkLockButton *button)
   gtk_image_set_from_gicon (GTK_IMAGE (priv->image), icon, GTK_ICON_SIZE_MENU);
   gtk_stack_set_visible_child (GTK_STACK (priv->stack),
                                allowed ? priv->label_lock : priv->label_unlock);
-  _gtk_lock_button_accessible_name_changed (button);
   gtk_widget_set_tooltip_markup (GTK_WIDGET (button), tooltip);
   gtk_widget_set_sensitive (GTK_WIDGET (button), sensitive);
   gtk_widget_set_visible (GTK_WIDGET (button), visible);
diff --git a/gtk/gtkmain.c b/gtk/gtkmain.c
index ae64e18..d82fbf3 100644
--- a/gtk/gtkmain.c
+++ b/gtk/gtkmain.c
@@ -131,8 +131,6 @@
 #include "gtkwindowprivate.h"
 #include "gtkwindowgroup.h"
 
-#include "a11y/gtkaccessibility.h"
-
 /* Private type definitions
  */
 typedef struct _GtkKeySnooperData        GtkKeySnooperData;
@@ -712,7 +710,6 @@ gettext_initialization (void)
 static void
 default_display_notify_cb (GdkDisplayManager *dm)
 {
-  _gtk_accessibility_init ();
   debug_flags[0].display = gdk_display_get_default ();
 }
 
@@ -2435,18 +2432,6 @@ gtk_invoke_key_snoopers (GtkWidget *grab_widget,
   GSList *slist;
   gint return_val = FALSE;
 
-  return_val = _gtk_accessibility_key_snooper (grab_widget, (GdkEventKey *) event);
-
-  slist = key_snoopers;
-  while (slist && !return_val)
-    {
-      GtkKeySnooperData *data;
-
-      data = slist->data;
-      slist = slist->next;
-      return_val = (*data->func) (grab_widget, (GdkEventKey*) event, data->func_data);
-    }
-
   return return_val;
 }
 
diff --git a/gtk/gtkmenu.c b/gtk/gtkmenu.c
index 18bef69..c039a03 100644
--- a/gtk/gtkmenu.c
+++ b/gtk/gtkmenu.c
@@ -1090,7 +1090,6 @@ gtk_menu_class_init (GtkMenuClass *class)
                                 GTK_TYPE_SCROLL_TYPE,
                                 GTK_SCROLL_PAGE_DOWN);
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_MENU_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "menu");
 }
 
diff --git a/gtk/gtkmenubar.c b/gtk/gtkmenubar.c
index fcf687b..ba80892 100644
--- a/gtk/gtkmenubar.c
+++ b/gtk/gtkmenubar.c
@@ -275,7 +275,6 @@ gtk_menu_bar_class_init (GtkMenuBarClass *class)
                                                              GTK_PARAM_READABLE|G_PARAM_DEPRECATED));
 
   gtk_container_class_handle_border_width (container_class);
-  gtk_widget_class_set_accessible_role (widget_class, ATK_ROLE_MENU_BAR);
   gtk_widget_class_set_css_name (widget_class, "menubar");
 }
 
diff --git a/gtk/gtkmenubutton.c b/gtk/gtkmenubutton.c
index 56b687f..2bd7956 100644
--- a/gtk/gtkmenubutton.c
+++ b/gtk/gtkmenubutton.c
@@ -568,7 +568,6 @@ gtk_menu_button_class_init (GtkMenuButtonClass *klass)
 
   g_object_class_install_properties (gobject_class, LAST_PROP, menu_button_props);
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_MENU_BUTTON_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "button");
 }
 
diff --git a/gtk/gtkmenuitem.c b/gtk/gtkmenuitem.c
index 2fee8ee..f1d21c6 100644
--- a/gtk/gtkmenuitem.c
+++ b/gtk/gtkmenuitem.c
@@ -919,7 +919,6 @@ gtk_menu_item_class_init (GtkMenuItemClass *klass)
                                                              0, G_MAXINT, 12,
                                                              GTK_PARAM_READABLE|G_PARAM_DEPRECATED));
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_MENU_ITEM_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "menuitem");
 
   gtk_container_class_handle_border_width (container_class);
diff --git a/gtk/gtkmenushell.c b/gtk/gtkmenushell.c
index 515492c..5ea8925 100644
--- a/gtk/gtkmenushell.c
+++ b/gtk/gtkmenushell.c
@@ -420,8 +420,6 @@ gtk_menu_shell_class_init (GtkMenuShellClass *klass)
                                                          P_("A boolean that determines whether the menu grabs the keyboard focus"),
                                                          TRUE,
                                                          GTK_PARAM_READWRITE|G_PARAM_EXPLICIT_NOTIFY));
-
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_MENU_SHELL_ACCESSIBLE);
 }
 
 static GType
diff --git a/gtk/gtkmessagedialog.c b/gtk/gtkmessagedialog.c
index e70c820..82d22ec 100644
--- a/gtk/gtkmessagedialog.c
+++ b/gtk/gtkmessagedialog.c
@@ -163,8 +163,6 @@ gtk_message_dialog_class_init (GtkMessageDialogClass *class)
   
   widget_class->style_updated = gtk_message_dialog_style_updated;
 
-  gtk_widget_class_set_accessible_role (widget_class, ATK_ROLE_ALERT);
-
   gobject_class->constructed = gtk_message_dialog_constructed;
   gobject_class->set_property = gtk_message_dialog_set_property;
   gobject_class->get_property = gtk_message_dialog_get_property;
@@ -372,7 +370,6 @@ setup_type (GtkMessageDialog *dialog,
 {
   GtkMessageDialogPrivate *priv = dialog->priv;
   const gchar *name = NULL;
-  AtkObject *atk_obj;
 
   if (priv->message_type == type)
     return;
@@ -405,14 +402,6 @@ setup_type (GtkMessageDialog *dialog,
       break;
     }
 
-  atk_obj = gtk_widget_get_accessible (GTK_WIDGET (dialog));
-  if (GTK_IS_ACCESSIBLE (atk_obj))
-    {
-      atk_object_set_role (atk_obj, ATK_ROLE_ALERT);
-      if (name)
-        atk_object_set_name (atk_obj, name);
-    }
-
   g_object_notify (G_OBJECT (dialog), "message-type");
 }
 
diff --git a/gtk/gtkmodelbutton.c b/gtk/gtkmodelbutton.c
index 4653cff..e0b5c12 100644
--- a/gtk/gtkmodelbutton.c
+++ b/gtk/gtkmodelbutton.c
@@ -247,15 +247,6 @@ gtk_model_button_update_state (GtkModelButton *button)
     gtk_css_gadget_set_state (button->gadget, state);
 
   gtk_css_gadget_set_state (button->indicator_gadget, indicator_state);
-
-  if (button->role == GTK_BUTTON_ROLE_CHECK ||
-      button->role == GTK_BUTTON_ROLE_RADIO)
-    {
-      AtkObject *object = _gtk_widget_peek_accessible (GTK_WIDGET (button));
-      if (object)
-        atk_object_notify_state_change (object, ATK_STATE_CHECKED,
-                                        (indicator_state & GTK_STATE_FLAG_CHECKED));
-    }
 }
 
 static void
@@ -310,17 +301,13 @@ gtk_model_button_direction_changed (GtkWidget        *widget,
 static void
 update_node_name (GtkModelButton *button)
 {
-  AtkObject *accessible;
-  AtkRole a11y_role;
   const gchar *indicator_name;
   gboolean indicator_visible;
   GtkCssNode *indicator_node;
 
-  accessible = gtk_widget_get_accessible (GTK_WIDGET (button));
   switch (button->role)
     {
     case GTK_BUTTON_ROLE_NORMAL:
-      a11y_role = ATK_ROLE_PUSH_BUTTON;
       if (button->menu_name)
         {
           indicator_name = I_("arrow");
@@ -334,13 +321,11 @@ update_node_name (GtkModelButton *button)
       break;
 
     case GTK_BUTTON_ROLE_CHECK:
-      a11y_role = ATK_ROLE_CHECK_BOX;
       indicator_name = I_("check");
       indicator_visible = TRUE;
       break;
 
     case GTK_BUTTON_ROLE_RADIO:
-      a11y_role = ATK_ROLE_RADIO_BUTTON;
       indicator_name = I_("radio");
       indicator_visible = TRUE;
       break;
@@ -352,8 +337,6 @@ update_node_name (GtkModelButton *button)
   if (button->iconic)
     indicator_visible = FALSE;
 
-  atk_object_set_role (accessible, a11y_role);
-
   indicator_node = gtk_css_gadget_get_node (button->indicator_gadget);
   gtk_css_node_set_name (indicator_node, indicator_name);
   gtk_css_node_set_visible (indicator_node, indicator_visible);
@@ -1099,18 +1082,6 @@ gtk_model_button_finalize (GObject *object)
   G_OBJECT_CLASS (gtk_model_button_parent_class)->finalize (object);
 }
 
-static AtkObject *
-gtk_model_button_get_accessible (GtkWidget *widget)
-{
-  AtkObject *object;
-
-  object = GTK_WIDGET_CLASS (gtk_model_button_parent_class)->get_accessible (widget);
-
-  gtk_model_button_update_state (GTK_MODEL_BUTTON (widget));
-
-  return object;
-}
-
 static void
 gtk_model_button_class_init (GtkModelButtonClass *class)
 {
@@ -1132,7 +1103,6 @@ gtk_model_button_class_init (GtkModelButtonClass *class)
   widget_class->destroy = gtk_model_button_destroy;
   widget_class->state_flags_changed = gtk_model_button_state_flags_changed;
   widget_class->direction_changed = gtk_model_button_direction_changed;
-  widget_class->get_accessible = gtk_model_button_get_accessible;
 
   button_class->clicked = gtk_model_button_clicked;
 
@@ -1276,7 +1246,6 @@ gtk_model_button_class_init (GtkModelButtonClass *class)
                           G_PARAM_READWRITE | G_PARAM_EXPLICIT_NOTIFY | G_PARAM_STATIC_STRINGS);
   g_object_class_install_properties (object_class, LAST_PROPERTY, properties);
 
-  gtk_widget_class_set_accessible_role (GTK_WIDGET_CLASS (class), ATK_ROLE_PUSH_BUTTON);
   gtk_widget_class_set_css_name (GTK_WIDGET_CLASS (class), "modelbutton");
 }
 
diff --git a/gtk/gtkmodelmenuitem.c b/gtk/gtkmodelmenuitem.c
index 103f053..c0ac121 100644
--- a/gtk/gtkmodelmenuitem.c
+++ b/gtk/gtkmodelmenuitem.c
@@ -94,35 +94,27 @@ static void
 gtk_model_menu_item_set_action_role (GtkModelMenuItem       *item,
                                      GtkMenuTrackerItemRole  role)
 {
-  AtkObject *accessible;
-  AtkRole a11y_role;
-
   if (role == item->role)
     return;
 
   gtk_check_menu_item_set_draw_as_radio (GTK_CHECK_MENU_ITEM (item), role == GTK_MENU_TRACKER_ITEM_ROLE_RADIO);
   gtk_model_menu_item_set_has_indicator (item, role != GTK_MENU_TRACKER_ITEM_ROLE_NORMAL);
 
-  accessible = gtk_widget_get_accessible (GTK_WIDGET (item));
   switch (role)
     {
     case GTK_MENU_TRACKER_ITEM_ROLE_NORMAL:
-      a11y_role = ATK_ROLE_MENU_ITEM;
       break;
 
     case GTK_MENU_TRACKER_ITEM_ROLE_CHECK:
-      a11y_role = ATK_ROLE_CHECK_MENU_ITEM;
       break;
 
     case GTK_MENU_TRACKER_ITEM_ROLE_RADIO:
-      a11y_role = ATK_ROLE_RADIO_MENU_ITEM;
       break;
 
     default:
       g_assert_not_reached ();
     }
 
-  atk_object_set_role (accessible, a11y_role);
   g_object_notify (G_OBJECT (item), "action-role");
 }
 
@@ -499,8 +491,6 @@ gtk_model_menu_item_class_init (GtkModelMenuItemClass *class)
   g_object_class_install_property (object_class, PROP_ACCEL,
                                    g_param_spec_string ("accel", "accel", "accel", NULL,
                                                         G_PARAM_READWRITE | G_PARAM_STATIC_STRINGS | G_PARAM_EXPLICIT_NOTIFY));
-
-  gtk_widget_class_set_accessible_role (GTK_WIDGET_CLASS (class), ATK_ROLE_MENU_ITEM);
 }
 
 GtkWidget *
diff --git a/gtk/gtknotebook.c b/gtk/gtknotebook.c
index f51570e..8a1c642 100644
--- a/gtk/gtknotebook.c
+++ b/gtk/gtknotebook.c
@@ -1282,7 +1282,6 @@ gtk_notebook_class_init (GtkNotebookClass *class)
 
   gtk_container_class_handle_border_width (container_class);
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_NOTEBOOK_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "notebook");
 }
 
diff --git a/gtk/gtkpaned.c b/gtk/gtkpaned.c
index 4d44a07..306ed97 100644
--- a/gtk/gtkpaned.c
+++ b/gtk/gtkpaned.c
@@ -692,7 +692,6 @@ gtk_paned_class_init (GtkPanedClass *class)
   add_move_binding (binding_set, GDK_KEY_End, 0, GTK_SCROLL_END);
   add_move_binding (binding_set, GDK_KEY_KP_End, 0, GTK_SCROLL_END);
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_PANED_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "paned");
 }
 
diff --git a/gtk/gtkpango.c b/gtk/gtkpango.c
index a76ad57..8745a6b 100644
--- a/gtk/gtkpango.c
+++ b/gtk/gtkpango.c
@@ -233,300 +233,6 @@ _gtk_pango_fill_layout (cairo_t     *cr,
     cairo_move_to (cr, current_x, current_y);
 }
 
-static AtkAttributeSet *
-add_attribute (AtkAttributeSet  *attributes,
-               AtkTextAttribute  attr,
-               const gchar      *value)
-{
-  AtkAttribute *at;
-
-  at = g_new (AtkAttribute, 1);
-  at->name = g_strdup (atk_text_attribute_get_name (attr));
-  at->value = g_strdup (value);
-
-  return g_slist_prepend (attributes, at);
-}
-
-/*
- * _gtk_pango_get_default_attributes:
- * @attributes: a #AtkAttributeSet to add the attributes to
- * @layout: the #PangoLayout from which to get attributes
- *
- * Adds the default text attributes from @layout to @attributes,
- * after translating them from Pango attributes to ATK attributes.
- *
- * This is a convenience function that can be used to implement
- * support for the #AtkText interface in widgets using Pango
- * layouts.
- *
- * Returns: the modified @attributes
- */
-AtkAttributeSet*
-_gtk_pango_get_default_attributes (AtkAttributeSet *attributes,
-                                   PangoLayout     *layout)
-{
-  PangoContext *context;
-  gint i;
-  PangoWrapMode mode;
-
-  context = pango_layout_get_context (layout);
-  if (context)
-    {
-      PangoLanguage *language;
-      PangoFontDescription *font;
-
-      language = pango_context_get_language (context);
-      if (language)
-        attributes = add_attribute (attributes, ATK_TEXT_ATTR_LANGUAGE,
-                         pango_language_to_string (language));
-
-      font = pango_context_get_font_description (context);
-      if (font)
-        {
-          gchar buf[60];
-          attributes = add_attribute (attributes, ATK_TEXT_ATTR_STYLE,
-                           atk_text_attribute_get_value (ATK_TEXT_ATTR_STYLE,
-                                 pango_font_description_get_style (font)));
-          attributes = add_attribute (attributes, ATK_TEXT_ATTR_VARIANT,
-                           atk_text_attribute_get_value (ATK_TEXT_ATTR_VARIANT,
-                                 pango_font_description_get_variant (font)));
-          attributes = add_attribute (attributes, ATK_TEXT_ATTR_STRETCH,
-                           atk_text_attribute_get_value (ATK_TEXT_ATTR_STRETCH,
-                                 pango_font_description_get_stretch (font)));
-          attributes = add_attribute (attributes, ATK_TEXT_ATTR_FAMILY_NAME,
-                           pango_font_description_get_family (font));
-          g_snprintf (buf, 60, "%d", pango_font_description_get_weight (font));
-          attributes = add_attribute (attributes, ATK_TEXT_ATTR_WEIGHT, buf);
-          g_snprintf (buf, 60, "%i", pango_font_description_get_size (font) / PANGO_SCALE);
-          attributes = add_attribute (attributes, ATK_TEXT_ATTR_SIZE, buf);
-        }
-    }
-  if (pango_layout_get_justify (layout))
-    {
-      i = 3;
-    }
-  else
-    {
-      PangoAlignment align;
-
-      align = pango_layout_get_alignment (layout);
-      if (align == PANGO_ALIGN_LEFT)
-        i = 0;
-      else if (align == PANGO_ALIGN_CENTER)
-        i = 2;
-      else   /* PANGO_ALIGN_RIGHT */
-        i = 1;
-    }
-  attributes = add_attribute (attributes, ATK_TEXT_ATTR_JUSTIFICATION,
-                   atk_text_attribute_get_value (ATK_TEXT_ATTR_JUSTIFICATION, i));
-  mode = pango_layout_get_wrap (layout);
-  if (mode == PANGO_WRAP_WORD)
-    i = 2;
-  else   /* PANGO_WRAP_CHAR */
-    i = 1;
-  attributes = add_attribute (attributes, ATK_TEXT_ATTR_WRAP_MODE,
-                   atk_text_attribute_get_value (ATK_TEXT_ATTR_WRAP_MODE, i));
-
-  attributes = add_attribute (attributes, ATK_TEXT_ATTR_STRIKETHROUGH,
-                   atk_text_attribute_get_value (ATK_TEXT_ATTR_STRIKETHROUGH, 0));
-  attributes = add_attribute (attributes, ATK_TEXT_ATTR_UNDERLINE,
-                   atk_text_attribute_get_value (ATK_TEXT_ATTR_UNDERLINE, 0));
-  attributes = add_attribute (attributes, ATK_TEXT_ATTR_RISE, "0");
-  attributes = add_attribute (attributes, ATK_TEXT_ATTR_SCALE, "1");
-  attributes = add_attribute (attributes, ATK_TEXT_ATTR_BG_FULL_HEIGHT, "0");
-  attributes = add_attribute (attributes, ATK_TEXT_ATTR_PIXELS_INSIDE_WRAP, "0");
-  attributes = add_attribute (attributes, ATK_TEXT_ATTR_PIXELS_BELOW_LINES, "0");
-  attributes = add_attribute (attributes, ATK_TEXT_ATTR_PIXELS_ABOVE_LINES, "0");
-  attributes = add_attribute (attributes, ATK_TEXT_ATTR_EDITABLE,
-                   atk_text_attribute_get_value (ATK_TEXT_ATTR_EDITABLE, 0));
-  attributes = add_attribute (attributes, ATK_TEXT_ATTR_INVISIBLE,
-                   atk_text_attribute_get_value (ATK_TEXT_ATTR_INVISIBLE, 0));
-  attributes = add_attribute (attributes, ATK_TEXT_ATTR_INDENT, "0");
-  attributes = add_attribute (attributes, ATK_TEXT_ATTR_RIGHT_MARGIN, "0");
-  attributes = add_attribute (attributes, ATK_TEXT_ATTR_LEFT_MARGIN, "0");
-
-  return attributes;
-}
-
-/*
- * _gtk_pango_get_run_attributes:
- * @attributes: a #AtkAttributeSet to add attributes to
- * @layout: the #PangoLayout to get the attributes from
- * @offset: the offset at which the attributes are wanted
- * @start_offset: return location for the starting offset
- *    of the current run
- * @end_offset: return location for the ending offset of the
- *    current run
- *
- * Finds the “run” around index (i.e. the maximal range of characters
- * where the set of applicable attributes remains constant) and
- * returns the starting and ending offsets for it.
- *
- * The attributes for the run are added to @attributes, after
- * translating them from Pango attributes to ATK attributes.
- *
- * This is a convenience function that can be used to implement
- * support for the #AtkText interface in widgets using Pango
- * layouts.
- *
- * Returns: the modified #AtkAttributeSet
- */
-AtkAttributeSet *
-_gtk_pango_get_run_attributes (AtkAttributeSet *attributes,
-                               PangoLayout     *layout,
-                               gint             offset,
-                               gint            *start_offset,
-                               gint            *end_offset)
-{
-  PangoAttrIterator *iter;
-  PangoAttrList *attr;
-  PangoAttrString *pango_string;
-  PangoAttrInt *pango_int;
-  PangoAttrColor *pango_color;
-  PangoAttrLanguage *pango_lang;
-  PangoAttrFloat *pango_float;
-  gint index, start_index, end_index;
-  gboolean is_next;
-  glong len;
-  const gchar *text;
-  gchar *value;
-
-  text = pango_layout_get_text (layout);
-  len = g_utf8_strlen (text, -1);
-
-  /* Grab the attributes of the PangoLayout, if any */
-  attr = pango_layout_get_attributes (layout);
-
-  if (attr == NULL)
-    {
-      *start_offset = 0;
-      *end_offset = len;
-      return attributes;
-    }
-
-  iter = pango_attr_list_get_iterator (attr);
-  /* Get invariant range offsets */
-  /* If offset out of range, set offset in range */
-  if (offset > len)
-    offset = len;
-  else if (offset < 0)
-    offset = 0;
-
-  index = g_utf8_offset_to_pointer (text, offset) - text;
-  pango_attr_iterator_range (iter, &start_index, &end_index);
-  is_next = TRUE;
-  while (is_next)
-    {
-      if (index >= start_index && index < end_index)
-        {
-          *start_offset = g_utf8_pointer_to_offset (text, text + start_index);
-          if (end_index == G_MAXINT) /* Last iterator */
-            end_index = len;
-
-          *end_offset = g_utf8_pointer_to_offset (text, text + end_index);
-          break;
-        }
-      is_next = pango_attr_iterator_next (iter);
-      pango_attr_iterator_range (iter, &start_index, &end_index);
-    }
-
-  /* Get attributes */
-  pango_string = (PangoAttrString*) pango_attr_iterator_get (iter, PANGO_ATTR_FAMILY);
-  if (pango_string != NULL)
-    {
-      value = g_strdup_printf ("%s", pango_string->value);
-      attributes = add_attribute (attributes, ATK_TEXT_ATTR_FAMILY_NAME, value);
-      g_free (value);
-    }
-  pango_int = (PangoAttrInt*) pango_attr_iterator_get (iter, PANGO_ATTR_STYLE);
-  if (pango_int != NULL)
-    {
-      attributes = add_attribute (attributes, ATK_TEXT_ATTR_STYLE,
-                       atk_text_attribute_get_value (ATK_TEXT_ATTR_STYLE, pango_int->value));
-    }
-  pango_int = (PangoAttrInt*) pango_attr_iterator_get (iter, PANGO_ATTR_WEIGHT);
-  if (pango_int != NULL)
-    {
-      value = g_strdup_printf ("%i", pango_int->value);
-      attributes = add_attribute (attributes, ATK_TEXT_ATTR_WEIGHT, value);
-      g_free (value);
-    }
-  pango_int = (PangoAttrInt*) pango_attr_iterator_get (iter, PANGO_ATTR_VARIANT);
-  if (pango_int != NULL)
-    {
-      attributes = add_attribute (attributes, ATK_TEXT_ATTR_VARIANT,
-                       atk_text_attribute_get_value (ATK_TEXT_ATTR_VARIANT, pango_int->value));
-    }
-  pango_int = (PangoAttrInt*) pango_attr_iterator_get (iter, PANGO_ATTR_STRETCH);
-  if (pango_int != NULL)
-    {
-      attributes = add_attribute (attributes, ATK_TEXT_ATTR_STRETCH,
-                       atk_text_attribute_get_value (ATK_TEXT_ATTR_STRETCH, pango_int->value));
-    }
-  pango_int = (PangoAttrInt*) pango_attr_iterator_get (iter, PANGO_ATTR_SIZE);
-  if (pango_int != NULL)
-    {
-      value = g_strdup_printf ("%i", pango_int->value / PANGO_SCALE);
-      attributes = add_attribute (attributes, ATK_TEXT_ATTR_SIZE, value);
-      g_free (value);
-    }
-  pango_int = (PangoAttrInt*) pango_attr_iterator_get (iter, PANGO_ATTR_UNDERLINE);
-  if (pango_int != NULL)
-    {
-      attributes = add_attribute (attributes, ATK_TEXT_ATTR_UNDERLINE,
-                       atk_text_attribute_get_value (ATK_TEXT_ATTR_UNDERLINE, pango_int->value));
-    }
-  pango_int = (PangoAttrInt*) pango_attr_iterator_get (iter, PANGO_ATTR_STRIKETHROUGH);
-  if (pango_int != NULL)
-    {
-      attributes = add_attribute (attributes, ATK_TEXT_ATTR_STRIKETHROUGH,
-                       atk_text_attribute_get_value (ATK_TEXT_ATTR_STRIKETHROUGH, pango_int->value));
-    }
-  pango_int = (PangoAttrInt*) pango_attr_iterator_get (iter, PANGO_ATTR_RISE);
-  if (pango_int != NULL)
-    {
-      value = g_strdup_printf ("%i", pango_int->value);
-      attributes = add_attribute (attributes, ATK_TEXT_ATTR_RISE, value);
-      g_free (value);
-    }
-  pango_lang = (PangoAttrLanguage*) pango_attr_iterator_get (iter, PANGO_ATTR_LANGUAGE);
-  if (pango_lang != NULL)
-    {
-      attributes = add_attribute (attributes, ATK_TEXT_ATTR_LANGUAGE,
-                                  pango_language_to_string (pango_lang->value));
-    }
-  pango_float = (PangoAttrFloat*) pango_attr_iterator_get (iter, PANGO_ATTR_SCALE);
-  if (pango_float != NULL)
-    {
-      value = g_strdup_printf ("%g", pango_float->value);
-      attributes = add_attribute (attributes, ATK_TEXT_ATTR_SCALE, value);
-      g_free (value);
-    }
-  pango_color = (PangoAttrColor*) pango_attr_iterator_get (iter, PANGO_ATTR_FOREGROUND);
-  if (pango_color != NULL)
-    {
-      value = g_strdup_printf ("%u,%u,%u",
-                               pango_color->color.red,
-                               pango_color->color.green,
-                               pango_color->color.blue);
-      attributes = add_attribute (attributes, ATK_TEXT_ATTR_FG_COLOR, value);
-      g_free (value);
-    }
-  pango_color = (PangoAttrColor*) pango_attr_iterator_get (iter, PANGO_ATTR_BACKGROUND);
-  if (pango_color != NULL)
-    {
-      value = g_strdup_printf ("%u,%u,%u",
-                               pango_color->color.red,
-                               pango_color->color.green,
-                               pango_color->color.blue);
-      attributes = add_attribute (attributes, ATK_TEXT_ATTR_BG_COLOR, value);
-      g_free (value);
-    }
-  pango_attr_iterator_destroy (iter);
-
-  return attributes;
-}
-
 /*
  * _gtk_pango_move_chars:
  * @layout: a #PangoLayout
@@ -793,7 +499,6 @@ _gtk_pango_is_inside_sentence (PangoLayout  *layout,
 
 static void
 pango_layout_get_line_before (PangoLayout     *layout,
-                              AtkTextBoundary  boundary_type,
                               gint             offset,
                               gint            *start_offset,
                               gint            *end_offset)
@@ -818,23 +523,7 @@ pango_layout_get_line_before (PangoLayout     *layout,
           /* Found line for offset */
           if (prev_line)
             {
-              switch (boundary_type)
-                {
-                case ATK_TEXT_BOUNDARY_LINE_START:
-                  end_index = start_index;
-                  start_index = prev_line->start_index;
-                  break;
-                case ATK_TEXT_BOUNDARY_LINE_END:
-                  if (prev_prev_line)
-                    start_index = prev_prev_line->start_index + prev_prev_line->length;
-                  else
-                    start_index = 0;
-                  end_index = prev_line->start_index + prev_line->length;
-                  break;
-                default:
-                  g_assert_not_reached();
                 }
-            }
           else
             start_index = end_index = 0;
 
@@ -860,7 +549,6 @@ pango_layout_get_line_before (PangoLayout     *layout,
 
 static void
 pango_layout_get_line_at (PangoLayout     *layout,
-                          AtkTextBoundary  boundary_type,
                           gint             offset,
                           gint            *start_offset,
                           gint            *end_offset)
@@ -882,21 +570,6 @@ pango_layout_get_line_at (PangoLayout     *layout,
 
       if (index >= start_index && index <= end_index)
         {
-          /* Found line for offset */
-          switch (boundary_type)
-            {
-            case ATK_TEXT_BOUNDARY_LINE_START:
-              if (pango_layout_iter_next_line (iter))
-                end_index = pango_layout_iter_get_line (iter)->start_index;
-              break;
-            case ATK_TEXT_BOUNDARY_LINE_END:
-              if (prev_line)
-                start_index = prev_line->start_index + prev_line->length;
-              break;
-            default:
-              g_assert_not_reached();
-            }
-
           found = TRUE;
           break;
         }
@@ -918,7 +591,6 @@ pango_layout_get_line_at (PangoLayout     *layout,
 
 static void
 pango_layout_get_line_after (PangoLayout     *layout,
-                             AtkTextBoundary  boundary_type,
                              gint             offset,
                              gint            *start_offset,
                              gint            *end_offset)
@@ -944,23 +616,7 @@ pango_layout_get_line_after (PangoLayout     *layout,
           if (pango_layout_iter_next_line (iter))
             {
               line = pango_layout_iter_get_line (iter);
-              switch (boundary_type)
-                {
-                case ATK_TEXT_BOUNDARY_LINE_START:
-                  start_index = line->start_index;
-                  if (pango_layout_iter_next_line (iter))
-                    end_index = pango_layout_iter_get_line (iter)->start_index;
-                  else
-                    end_index = start_index + line->length;
-                  break;
-                case ATK_TEXT_BOUNDARY_LINE_END:
-                  start_index = end_index;
-                  end_index = line->start_index + line->length;
-                  break;
-                default:
-                  g_assert_not_reached();
                 }
-            }
           else
             start_index = end_index;
 
@@ -986,23 +642,17 @@ pango_layout_get_line_after (PangoLayout     *layout,
 /*
  * _gtk_pango_get_text_before:
  * @layout: a #PangoLayout
- * @boundary_type: a #AtkTextBoundary
  * @offset: a character offset in @layout
  * @start_offset: return location for the start of the returned text
  * @end_offset: return location for the end of the return text
  *
  * Gets a slice of the text from @layout before @offset.
  *
- * The @boundary_type determines the size of the returned slice of
- * text. For the exact semantics of this function, see
- * atk_text_get_text_before_offset().
- *
  * Returns: a newly allocated string containing a slice of text
  *     from layout. Free with g_free().
  */
 gchar *
 _gtk_pango_get_text_before (PangoLayout     *layout,
-                            AtkTextBoundary  boundary_type,
                             gint             offset,
                             gint            *start_offset,
                             gint            *end_offset)
@@ -1026,56 +676,6 @@ _gtk_pango_get_text_before (PangoLayout     *layout,
   start = offset;
   end = start;
 
-  switch (boundary_type)
-    {
-    case ATK_TEXT_BOUNDARY_CHAR:
-      start = _gtk_pango_move_chars (layout, start, -1);
-      break;
-
-    case ATK_TEXT_BOUNDARY_WORD_START:
-      if (!attrs[start].is_word_start)
-        start = _gtk_pango_move_words (layout, start, -1);
-      end = start;
-      start = _gtk_pango_move_words (layout, start, -1);
-      break;
-
-    case ATK_TEXT_BOUNDARY_WORD_END:
-      if (_gtk_pango_is_inside_word (layout, start) &&
-          !attrs[start].is_word_start)
-        start = _gtk_pango_move_words (layout, start, -1);
-      while (!attrs[start].is_word_end && start > 0)
-        start = _gtk_pango_move_chars (layout, start, -1);
-      end = start;
-      start = _gtk_pango_move_words (layout, start, -1);
-      while (!attrs[start].is_word_end && start > 0)
-        start = _gtk_pango_move_chars (layout, start, -1);
-      break;
-
-    case ATK_TEXT_BOUNDARY_SENTENCE_START:
-      if (!attrs[start].is_sentence_start)
-        start = _gtk_pango_move_sentences (layout, start, -1);
-      end = start;
-      start = _gtk_pango_move_sentences (layout, start, -1);
-      break;
-
-    case ATK_TEXT_BOUNDARY_SENTENCE_END:
-      if (_gtk_pango_is_inside_sentence (layout, start) &&
-          !attrs[start].is_sentence_start)
-        start = _gtk_pango_move_sentences (layout, start, -1);
-      while (!attrs[start].is_sentence_end && start > 0)
-        start = _gtk_pango_move_chars (layout, start, -1);
-      end = start;
-      start = _gtk_pango_move_sentences (layout, start, -1);
-      while (!attrs[start].is_sentence_end && start > 0)
-        start = _gtk_pango_move_chars (layout, start, -1);
-      break;
-
-    case ATK_TEXT_BOUNDARY_LINE_START:
-    case ATK_TEXT_BOUNDARY_LINE_END:
-      pango_layout_get_line_before (layout, boundary_type, offset, &start, &end);
-      break;
-    }
-
   *start_offset = start;
   *end_offset = end;
 
@@ -1087,23 +687,17 @@ _gtk_pango_get_text_before (PangoLayout     *layout,
 /*
  * _gtk_pango_get_text_after:
  * @layout: a #PangoLayout
- * @boundary_type: a #AtkTextBoundary
  * @offset: a character offset in @layout
  * @start_offset: return location for the start of the returned text
  * @end_offset: return location for the end of the return text
  *
  * Gets a slice of the text from @layout after @offset.
  *
- * The @boundary_type determines the size of the returned slice of
- * text. For the exact semantics of this function, see
- * atk_text_get_text_after_offset().
- *
  * Returns: a newly allocated string containing a slice of text
  *     from layout. Free with g_free().
  */
 gchar *
 _gtk_pango_get_text_after (PangoLayout     *layout,
-                           AtkTextBoundary  boundary_type,
                            gint             offset,
                            gint            *start_offset,
                            gint            *end_offset)
@@ -1127,62 +721,6 @@ _gtk_pango_get_text_after (PangoLayout     *layout,
   start = offset;
   end = start;
 
-  switch (boundary_type)
-    {
-    case ATK_TEXT_BOUNDARY_CHAR:
-      start = _gtk_pango_move_chars (layout, start, 1);
-      end = start;
-      end = _gtk_pango_move_chars (layout, end, 1);
-      break;
-
-    case ATK_TEXT_BOUNDARY_WORD_START:
-      if (_gtk_pango_is_inside_word (layout, end))
-        end = _gtk_pango_move_words (layout, end, 1);
-      while (!attrs[end].is_word_start && end < n_attrs - 1)
-        end = _gtk_pango_move_chars (layout, end, 1);
-      start = end;
-      if (end < n_attrs - 1)
-        {
-          end = _gtk_pango_move_words (layout, end, 1);
-          while (!attrs[end].is_word_start && end < n_attrs - 1)
-            end = _gtk_pango_move_chars (layout, end, 1);
-        }
-      break;
-
-    case ATK_TEXT_BOUNDARY_WORD_END:
-      end = _gtk_pango_move_words (layout, end, 1);
-      start = end;
-      if (end < n_attrs - 1)
-        end = _gtk_pango_move_words (layout, end, 1);
-      break;
-
-    case ATK_TEXT_BOUNDARY_SENTENCE_START:
-      if (_gtk_pango_is_inside_sentence (layout, end))
-        end = _gtk_pango_move_sentences (layout, end, 1);
-      while (!attrs[end].is_sentence_start && end < n_attrs - 1)
-        end = _gtk_pango_move_chars (layout, end, 1);
-      start = end;
-      if (end < n_attrs - 1)
-        {
-          end = _gtk_pango_move_sentences (layout, end, 1);
-          while (!attrs[end].is_sentence_start && end < n_attrs - 1)
-            end = _gtk_pango_move_chars (layout, end, 1);
-        }
-      break;
-
-    case ATK_TEXT_BOUNDARY_SENTENCE_END:
-      end = _gtk_pango_move_sentences (layout, end, 1);
-      start = end;
-      if (end < n_attrs - 1)
-        end = _gtk_pango_move_sentences (layout, end, 1);
-      break;
-
-    case ATK_TEXT_BOUNDARY_LINE_START:
-    case ATK_TEXT_BOUNDARY_LINE_END:
-      pango_layout_get_line_after (layout, boundary_type, offset, &start, &end);
-      break;
-    }
-
   *start_offset = start;
   *end_offset = end;
 
@@ -1194,23 +732,17 @@ _gtk_pango_get_text_after (PangoLayout     *layout,
 /*
  * _gtk_pango_get_text_at:
  * @layout: a #PangoLayout
- * @boundary_type: a #AtkTextBoundary
  * @offset: a character offset in @layout
  * @start_offset: return location for the start of the returned text
  * @end_offset: return location for the end of the return text
  *
  * Gets a slice of the text from @layout at @offset.
  *
- * The @boundary_type determines the size of the returned slice of
- * text. For the exact semantics of this function, see
- * atk_text_get_text_after_offset().
- *
  * Returns: a newly allocated string containing a slice of text
  *     from layout. Free with g_free().
  */
 gchar *
 _gtk_pango_get_text_at (PangoLayout     *layout,
-                        AtkTextBoundary  boundary_type,
                         gint             offset,
                         gint            *start_offset,
                         gint            *end_offset)
@@ -1234,54 +766,6 @@ _gtk_pango_get_text_at (PangoLayout     *layout,
   start = offset;
   end = start;
 
-  switch (boundary_type)
-    {
-    case ATK_TEXT_BOUNDARY_CHAR:
-      end = _gtk_pango_move_chars (layout, end, 1);
-      break;
-
-    case ATK_TEXT_BOUNDARY_WORD_START:
-      if (!attrs[start].is_word_start)
-        start = _gtk_pango_move_words (layout, start, -1);
-      if (_gtk_pango_is_inside_word (layout, end))
-        end = _gtk_pango_move_words (layout, end, 1);
-      while (!attrs[end].is_word_start && end < n_attrs - 1)
-        end = _gtk_pango_move_chars (layout, end, 1);
-      break;
-
-    case ATK_TEXT_BOUNDARY_WORD_END:
-      if (_gtk_pango_is_inside_word (layout, start) &&
-          !attrs[start].is_word_start)
-        start = _gtk_pango_move_words (layout, start, -1);
-      while (!attrs[start].is_word_end && start > 0)
-        start = _gtk_pango_move_chars (layout, start, -1);
-      end = _gtk_pango_move_words (layout, end, 1);
-      break;
-
-    case ATK_TEXT_BOUNDARY_SENTENCE_START:
-      if (!attrs[start].is_sentence_start)
-        start = _gtk_pango_move_sentences (layout, start, -1);
-      if (_gtk_pango_is_inside_sentence (layout, end))
-        end = _gtk_pango_move_sentences (layout, end, 1);
-      while (!attrs[end].is_sentence_start && end < n_attrs - 1)
-        end = _gtk_pango_move_chars (layout, end, 1);
-      break;
-
-    case ATK_TEXT_BOUNDARY_SENTENCE_END:
-      if (_gtk_pango_is_inside_sentence (layout, start) &&
-          !attrs[start].is_sentence_start)
-        start = _gtk_pango_move_sentences (layout, start, -1);
-      while (!attrs[start].is_sentence_end && start > 0)
-        start = _gtk_pango_move_chars (layout, start, -1);
-      end = _gtk_pango_move_sentences (layout, end, 1);
-      break;
-
-    case ATK_TEXT_BOUNDARY_LINE_START:
-    case ATK_TEXT_BOUNDARY_LINE_END:
-      pango_layout_get_line_at (layout, boundary_type, offset, &start, &end);
-      break;
-    }
-
   *start_offset = start;
   *end_offset = end;
 
diff --git a/gtk/gtkpango.h b/gtk/gtkpango.h
index 388e364..b085159 100644
--- a/gtk/gtkpango.h
+++ b/gtk/gtkpango.h
@@ -27,7 +27,6 @@
 
 
 #include <pango/pangocairo.h>
-#include <atk/atk.h>
 
 G_BEGIN_DECLS
 
@@ -35,15 +34,6 @@ void             _gtk_pango_fill_layout            (cairo_t         *cr,
                                                     PangoLayout     *layout);
 
 
-AtkAttributeSet *_gtk_pango_get_default_attributes (AtkAttributeSet *attributes,
-                                                    PangoLayout     *layout);
-
-AtkAttributeSet *_gtk_pango_get_run_attributes     (AtkAttributeSet *attributes,
-                                                    PangoLayout     *layout,
-                                                    gint             offset,
-                                                    gint            *start_offset,
-                                                    gint            *end_offset);
-
 gint _gtk_pango_move_chars     (PangoLayout  *layout,
                                 gint          offset,
                                 gint          count);
@@ -64,17 +54,14 @@ gboolean _gtk_pango_is_inside_sentence (PangoLayout  *layout,
 
 
 gchar *_gtk_pango_get_text_before (PangoLayout     *layout,
-                                   AtkTextBoundary  boundary_type,
                                    gint             offset,
                                    gint            *start_offset,
                                    gint            *end_offset);
 gchar *_gtk_pango_get_text_at     (PangoLayout     *layout,
-                                   AtkTextBoundary  boundary_type,
                                    gint             offset,
                                    gint            *start_offset,
                                    gint            *end_offset);
 gchar *_gtk_pango_get_text_after  (PangoLayout     *layout,
-                                   AtkTextBoundary  boundary_type,
                                    gint             offset,
                                    gint            *start_offset,
                                    gint            *end_offset);
diff --git a/gtk/gtkpathbar.c b/gtk/gtkpathbar.c
index 60d70ad..fff37bc 100644
--- a/gtk/gtkpathbar.c
+++ b/gtk/gtkpathbar.c
@@ -1550,7 +1550,6 @@ make_directory_button (GtkPathBar  *path_bar,
 		       gboolean     current_dir,
 		       gboolean     file_is_hidden)
 {
-  AtkObject *atk_obj;
   GtkWidget *child = NULL;
   ButtonData *button_data;
 
@@ -1559,7 +1558,6 @@ make_directory_button (GtkPathBar  *path_bar,
   button_data = g_new0 (ButtonData, 1);
   button_data->type = find_button_type (path_bar, file, root_file);
   button_data->button = gtk_toggle_button_new ();
-  atk_obj = gtk_widget_get_accessible (button_data->button);
   gtk_widget_set_focus_on_click (button_data->button, FALSE);
   gtk_widget_add_events (button_data->button, GDK_SCROLL_MASK);
 
@@ -1569,7 +1567,6 @@ make_directory_button (GtkPathBar  *path_bar,
       button_data->image = gtk_image_new ();
       child = button_data->image;
       button_data->label = NULL;
-      atk_object_set_name (atk_obj, _("File System Root"));
       break;
     case HOME_BUTTON:
     case DESKTOP_BUTTON:
diff --git a/gtk/gtkplug.c b/gtk/gtkplug.c
index 6361b60..8eec0d4 100644
--- a/gtk/gtkplug.c
+++ b/gtk/gtkplug.c
@@ -178,8 +178,6 @@ gtk_plug_class_init (GtkPlugClass *class)
   widget_class->unmap = gtk_plug_unmap;
   widget_class->focus = gtk_plug_focus;
 
-  gtk_widget_class_set_accessible_role (widget_class, ATK_ROLE_PANEL);
-
   container_class->check_resize = gtk_plug_check_resize;
 
   window_class->set_focus = gtk_plug_set_focus;
diff --git a/gtk/gtkpopover.c b/gtk/gtkpopover.c
index b812e0e..d405358 100644
--- a/gtk/gtkpopover.c
+++ b/gtk/gtkpopover.c
@@ -1836,7 +1836,6 @@ gtk_popover_class_init (GtkPopoverClass *klass)
                   G_TYPE_NONE, 0);
 
   quark_widget_popovers = g_quark_from_static_string ("gtk-quark-widget-popovers");
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_POPOVER_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "popover");
 }
 
diff --git a/gtk/gtkprogressbar.c b/gtk/gtkprogressbar.c
index 4cb8437..b6a8f9e 100644
--- a/gtk/gtkprogressbar.c
+++ b/gtk/gtkprogressbar.c
@@ -427,7 +427,6 @@ gtk_progress_bar_class_init (GtkProgressBarClass *class)
                                                              1, G_MAXINT, MIN_VERTICAL_BAR_HEIGHT,
                                                              G_PARAM_READWRITE|G_PARAM_DEPRECATED));
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_PROGRESS_BAR_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "progressbar");
 }
 
diff --git a/gtk/gtkradiobutton.c b/gtk/gtkradiobutton.c
index 9b7aafd..85c5ced 100644
--- a/gtk/gtkradiobutton.c
+++ b/gtk/gtkradiobutton.c
@@ -216,7 +216,6 @@ gtk_radio_button_class_init (GtkRadioButtonClass *class)
 				       NULL,
 				       G_TYPE_NONE, 0);
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_RADIO_BUTTON_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "radiobutton");
 }
 
diff --git a/gtk/gtkradiomenuitem.c b/gtk/gtkradiomenuitem.c
index 8e66f85..a2e0fc0 100644
--- a/gtk/gtkradiomenuitem.c
+++ b/gtk/gtkradiomenuitem.c
@@ -407,8 +407,6 @@ gtk_radio_menu_item_class_init (GtkRadioMenuItemClass *klass)
 
   widget_class->destroy = gtk_radio_menu_item_destroy;
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_RADIO_MENU_ITEM_ACCESSIBLE);
-
   menu_item_class->activate = gtk_radio_menu_item_activate;
 
   /**
diff --git a/gtk/gtkrange.c b/gtk/gtkrange.c
index f53e084..7b3408f 100644
--- a/gtk/gtkrange.c
+++ b/gtk/gtkrange.c
@@ -657,8 +657,6 @@ gtk_range_class_init (GtkRangeClass *class)
 							       P_("Arrow scaling with regard to scroll button size"),
 							       0.0, 1.0, 0.5,
 							       GTK_PARAM_READABLE|G_PARAM_DEPRECATED));
-
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_RANGE_ACCESSIBLE);
 }
 
 static void
diff --git a/gtk/gtkscale.c b/gtk/gtkscale.c
index bee30ee..6d97b3d 100644
--- a/gtk/gtkscale.c
+++ b/gtk/gtkscale.c
@@ -944,7 +944,6 @@ gtk_scale_class_init (GtkScaleClass *class)
   add_slider_binding (binding_set, GDK_KEY_KP_End, 0,
                       GTK_SCROLL_END);
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_SCALE_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "scale");
 }
 
diff --git a/gtk/gtkscalebutton.c b/gtk/gtkscalebutton.c
index 82829b1..5377159 100644
--- a/gtk/gtkscalebutton.c
+++ b/gtk/gtkscalebutton.c
@@ -343,7 +343,6 @@ gtk_scale_button_class_init (GtkScaleButtonClass *klass)
   gtk_widget_class_bind_template_callback (widget_class, cb_scale_value_changed);
   gtk_widget_class_bind_template_callback (widget_class, cb_popup_mapped);
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_SCALE_BUTTON_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "button");
 }
 
diff --git a/gtk/gtkscrollbar.c b/gtk/gtkscrollbar.c
index ca21d75..f63b6fa 100644
--- a/gtk/gtkscrollbar.c
+++ b/gtk/gtkscrollbar.c
@@ -145,7 +145,6 @@ gtk_scrollbar_class_init (GtkScrollbarClass *class)
                                                                  FALSE,
                                                                  GTK_PARAM_READABLE));
 
-  gtk_widget_class_set_accessible_role (widget_class, ATK_ROLE_SCROLL_BAR);
   gtk_widget_class_set_css_name (widget_class, "scrollbar");
 }
 
diff --git a/gtk/gtkscrolledwindow.c b/gtk/gtkscrolledwindow.c
index f4c09d0..0675256 100644
--- a/gtk/gtkscrolledwindow.c
+++ b/gtk/gtkscrolledwindow.c
@@ -896,7 +896,6 @@ gtk_scrolled_window_class_init (GtkScrolledWindowClass *class)
   add_tab_bindings (binding_set, GDK_CONTROL_MASK, GTK_DIR_TAB_FORWARD);
   add_tab_bindings (binding_set, GDK_CONTROL_MASK | GDK_SHIFT_MASK, GTK_DIR_TAB_BACKWARD);
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_SCROLLED_WINDOW_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "scrolledwindow");
 }
 
diff --git a/gtk/gtksearchentry.c b/gtk/gtksearchentry.c
index a1243f3..4e3996e 100644
--- a/gtk/gtksearchentry.c
+++ b/gtk/gtksearchentry.c
@@ -358,18 +358,12 @@ gtk_search_entry_changed (GtkEditable *editable)
 static void
 gtk_search_entry_init (GtkSearchEntry *entry)
 {
-  AtkObject *atk_obj;
-
   g_object_set (entry,
                 "primary-icon-name", "edit-find-symbolic",
                 "primary-icon-activatable", FALSE,
                 "primary-icon-sensitive", FALSE,
                 NULL);
 
-  atk_obj = gtk_widget_get_accessible (GTK_WIDGET (entry));
-  if (GTK_IS_ACCESSIBLE (atk_obj))
-    atk_object_set_name (atk_obj, _("Search"));
-
   gtk_style_context_add_class (gtk_widget_get_style_context (GTK_WIDGET (entry)), "search");
 }
 
diff --git a/gtk/gtkseparator.c b/gtk/gtkseparator.c
index f76fb36..b9bee8e 100644
--- a/gtk/gtkseparator.c
+++ b/gtk/gtkseparator.c
@@ -211,7 +211,6 @@ gtk_separator_class_init (GtkSeparatorClass *class)
 
   g_object_class_override_property (object_class, PROP_ORIENTATION, "orientation");
 
-  gtk_widget_class_set_accessible_role (widget_class, ATK_ROLE_SEPARATOR);
   gtk_widget_class_set_css_name (widget_class, "separator");
 }
 
diff --git a/gtk/gtkseparatormenuitem.c b/gtk/gtkseparatormenuitem.c
index 1073deb..75d5ee9 100644
--- a/gtk/gtkseparatormenuitem.c
+++ b/gtk/gtkseparatormenuitem.c
@@ -58,7 +58,6 @@ gtk_separator_menu_item_class_init (GtkSeparatorMenuItemClass *class)
 
   GTK_MENU_ITEM_CLASS (class)->get_label = gtk_separator_menu_item_get_label;
 
-  gtk_widget_class_set_accessible_role (GTK_WIDGET_CLASS (class), ATK_ROLE_SEPARATOR);
   gtk_widget_class_set_css_name (GTK_WIDGET_CLASS (class), "separator");
 }
 
diff --git a/gtk/gtksocket.c b/gtk/gtksocket.c
index ffdaf8b..18b3d55 100644
--- a/gtk/gtksocket.c
+++ b/gtk/gtksocket.c
@@ -271,7 +271,6 @@ gtk_socket_class_init (GtkSocketClass *class)
 		  G_TYPE_BOOLEAN, 0);
 
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_SOCKET_ACCESSIBLE);
 }
 
 static void
@@ -1432,7 +1431,6 @@ _gtk_socket_accessible_embed (GtkWidget *socket, GdkWindow *window)
       return;
     }
 
-  gtk_socket_accessible_embed (GTK_SOCKET_ACCESSIBLE (gtk_widget_get_accessible (socket)), (gchar*) data);
   XFree (data);
 
   return;
diff --git a/gtk/gtkspinbutton.c b/gtk/gtkspinbutton.c
index 8e65d8a..b936763 100644
--- a/gtk/gtkspinbutton.c
+++ b/gtk/gtkspinbutton.c
@@ -592,7 +592,6 @@ gtk_spin_button_class_init (GtkSpinButtonClass *class)
   add_spin_binding (binding_set, GDK_KEY_Page_Up, GDK_CONTROL_MASK, GTK_SCROLL_END);
   add_spin_binding (binding_set, GDK_KEY_Page_Down, GDK_CONTROL_MASK, GTK_SCROLL_START);
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_SPIN_BUTTON_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "spinbutton");
 }
 
diff --git a/gtk/gtkspinner.c b/gtk/gtkspinner.c
index 06020b3..a45a073 100644
--- a/gtk/gtkspinner.c
+++ b/gtk/gtkspinner.c
@@ -223,7 +223,6 @@ gtk_spinner_class_init (GtkSpinnerClass *klass)
                                                          FALSE,
                                                          GTK_PARAM_READWRITE|G_PARAM_EXPLICIT_NOTIFY));
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_SPINNER_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "spinner");
 }
 
diff --git a/gtk/gtkstack.c b/gtk/gtkstack.c
index 51a3a73..338b2f0 100644
--- a/gtk/gtkstack.c
+++ b/gtk/gtkstack.c
@@ -559,7 +559,6 @@ gtk_stack_class_init (GtkStackClass *klass)
 
   gtk_container_class_install_child_properties (container_class, LAST_CHILD_PROP, stack_child_props);
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_STACK_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "stack");
 }
 
@@ -1119,10 +1118,6 @@ set_visible_child (GtkStack               *stack,
         }
     }
 
-  gtk_stack_accessible_update_visible_child (stack,
-                                             priv->visible_child ? priv->visible_child->widget : NULL,
-                                             child_info ? child_info->widget : NULL);
-
   priv->visible_child = child_info;
 
   if (child_info)
diff --git a/gtk/gtkstatusbar.c b/gtk/gtkstatusbar.c
index 8d34f64..3eed895 100644
--- a/gtk/gtkstatusbar.c
+++ b/gtk/gtkstatusbar.c
@@ -187,7 +187,6 @@ gtk_statusbar_class_init (GtkStatusbarClass *class)
   gtk_widget_class_bind_template_child_private (widget_class, GtkStatusbar, frame);
   gtk_widget_class_bind_template_child_private (widget_class, GtkStatusbar, label);
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_STATUSBAR_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "statusbar");
 }
 
diff --git a/gtk/gtkstylecontext.c b/gtk/gtkstylecontext.c
index 11625d1..3a03046 100644
--- a/gtk/gtkstylecontext.c
+++ b/gtk/gtkstylecontext.c
@@ -3102,63 +3102,6 @@ _gtk_style_context_get_pango_attributes (GtkStyleContext *context)
   return gtk_css_style_get_pango_attributes (gtk_style_context_lookup_style (context));
 }
 
-static AtkAttributeSet *
-add_attribute (AtkAttributeSet  *attributes,
-               AtkTextAttribute  attr,
-               const gchar      *value)
-{
-  AtkAttribute *at;
-
-  at = g_new (AtkAttribute, 1);
-  at->name = g_strdup (atk_text_attribute_get_name (attr));
-  at->value = g_strdup (value);
-
-  return g_slist_prepend (attributes, at);
-}
-
-/*
- * _gtk_style_context_get_attributes:
- * @attributes: a #AtkAttributeSet to add attributes to
- * @context: the #GtkStyleContext to get attributes from
- * @flags: the state to use with @context
- *
- * Adds the foreground and background color from @context to
- * @attributes, after translating them to ATK attributes.
- *
- * This is a convenience function that can be used in
- * implementing the #AtkText interface in widgets.
- *
- * Returns: the modified #AtkAttributeSet
- */
-AtkAttributeSet *
-_gtk_style_context_get_attributes (AtkAttributeSet *attributes,
-                                   GtkStyleContext *context,
-                                   GtkStateFlags    flags)
-{
-  GdkRGBA color;
-  gchar *value;
-
-G_GNUC_BEGIN_IGNORE_DEPRECATIONS
-  gtk_style_context_get_background_color (context, flags, &color);
-G_GNUC_END_IGNORE_DEPRECATIONS
-  value = g_strdup_printf ("%u,%u,%u",
-                           (guint) ceil (color.red * 65536 - color.red),
-                           (guint) ceil (color.green * 65536 - color.green),
-                           (guint) ceil (color.blue * 65536 - color.blue));
-  attributes = add_attribute (attributes, ATK_TEXT_ATTR_BG_COLOR, value);
-  g_free (value);
-
-  gtk_style_context_get_color (context, flags, &color);
-  value = g_strdup_printf ("%u,%u,%u",
-                           (guint) ceil (color.red * 65536 - color.red),
-                           (guint) ceil (color.green * 65536 - color.green),
-                           (guint) ceil (color.blue * 65536 - color.blue));
-  attributes = add_attribute (attributes, ATK_TEXT_ATTR_FG_COLOR, value);
-  g_free (value);
-
-  return attributes;
-}
-
 cairo_pattern_t *
 gtk_gradient_resolve_for_context (GtkGradient     *gradient,
                                   GtkStyleContext *context)
diff --git a/gtk/gtkstylecontext.h b/gtk/gtkstylecontext.h
index 9f8551f..42693ba 100644
--- a/gtk/gtkstylecontext.h
+++ b/gtk/gtkstylecontext.h
@@ -26,7 +26,6 @@
 #include <gtk/gtkcsssection.h>
 #include <gtk/gtkstyleprovider.h>
 #include <gtk/gtktypes.h>
-#include <atk/atk.h>
 
 G_BEGIN_DECLS
 
diff --git a/gtk/gtkstylecontextprivate.h b/gtk/gtkstylecontextprivate.h
index 421e526..f527267 100644
--- a/gtk/gtkstylecontextprivate.h
+++ b/gtk/gtkstylecontextprivate.h
@@ -72,11 +72,6 @@ void           _gtk_style_context_get_icon_extents           (GtkStyleContext
 
 PangoAttrList *_gtk_style_context_get_pango_attributes       (GtkStyleContext *context);
 
-/* Accessibility support */
-AtkAttributeSet *_gtk_style_context_get_attributes           (AtkAttributeSet    *attributes,
-                                                              GtkStyleContext    *context,
-                                                              GtkStateFlags       flags);
-
 G_END_DECLS
 
 #endif /* __GTK_STYLE_CONTEXT_PRIVATE_H__ */
diff --git a/gtk/gtkswitch.c b/gtk/gtkswitch.c
index 8a4aa72..a21ad59 100644
--- a/gtk/gtkswitch.c
+++ b/gtk/gtkswitch.c
@@ -1008,9 +1008,6 @@ gtk_switch_class_init (GtkSwitchClass *klass)
   g_object_class_override_property (gobject_class, PROP_ACTION_NAME, "action-name");
   g_object_class_override_property (gobject_class, PROP_ACTION_TARGET, "action-target");
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_SWITCH_ACCESSIBLE);
-  gtk_widget_class_set_accessible_role (widget_class, ATK_ROLE_TOGGLE_BUTTON);
-
   gtk_widget_class_set_css_name (widget_class, "switch");
 }
 
@@ -1120,7 +1117,6 @@ gtk_switch_set_active (GtkSwitch *sw,
 
   if (priv->is_active != is_active)
     {
-      AtkObject *accessible;
       gboolean handled;
 
       priv->is_active = is_active;
@@ -1134,9 +1130,6 @@ gtk_switch_set_active (GtkSwitch *sw,
 
       g_object_notify_by_pspec (G_OBJECT (sw), switch_props[PROP_ACTIVE]);
 
-      accessible = gtk_widget_get_accessible (GTK_WIDGET (sw));
-      atk_object_notify_state_change (accessible, ATK_STATE_CHECKED, priv->is_active);
-
       gtk_widget_queue_allocate (GTK_WIDGET (sw));
     }
 }
diff --git a/gtk/gtktextbuffer.c b/gtk/gtktextbuffer.c
index f5f17f5..90208e2 100644
--- a/gtk/gtktextbuffer.c
+++ b/gtk/gtktextbuffer.c
@@ -4478,7 +4478,6 @@ _gtk_text_buffer_spew (GtkTextBuffer *buffer)
 
 void
 _gtk_text_buffer_get_text_before (GtkTextBuffer   *buffer,
-                                  AtkTextBoundary  boundary_type,
                                   GtkTextIter     *position,
                                   GtkTextIter     *start,
                                   GtkTextIter     *end)
@@ -4487,103 +4486,10 @@ _gtk_text_buffer_get_text_before (GtkTextBuffer   *buffer,
 
   *start = *position;
   *end = *start;
-
-  switch (boundary_type)
-    {
-    case ATK_TEXT_BOUNDARY_CHAR:
-      gtk_text_iter_backward_char (start);
-      break;
-
-    case ATK_TEXT_BOUNDARY_WORD_START:
-      if (!gtk_text_iter_starts_word (start))
-        gtk_text_iter_backward_word_start (start);
-      *end = *start;
-      gtk_text_iter_backward_word_start (start);
-      break;
-
-    case ATK_TEXT_BOUNDARY_WORD_END:
-      if (gtk_text_iter_inside_word (start) &&
-          !gtk_text_iter_starts_word (start))
-        gtk_text_iter_backward_word_start (start);
-      while (!gtk_text_iter_ends_word (start))
-        {
-          if (!gtk_text_iter_backward_char (start))
-            break;
-        }
-      *end = *start;
-      gtk_text_iter_backward_word_start (start);
-      while (!gtk_text_iter_ends_word (start))
-        {
-          if (!gtk_text_iter_backward_char (start))
-            break;
-        }
-      break;
-
-    case ATK_TEXT_BOUNDARY_SENTENCE_START:
-      if (!gtk_text_iter_starts_sentence (start))
-        gtk_text_iter_backward_sentence_start (start);
-      *end = *start;
-      gtk_text_iter_backward_sentence_start (start);
-      break;
-
-    case ATK_TEXT_BOUNDARY_SENTENCE_END:
-      if (gtk_text_iter_inside_sentence (start) &&
-          !gtk_text_iter_starts_sentence (start))
-        gtk_text_iter_backward_sentence_start (start);
-      while (!gtk_text_iter_ends_sentence (start))
-        {
-          if (!gtk_text_iter_backward_char (start))
-            break;
-        }
-      *end = *start;
-      gtk_text_iter_backward_sentence_start (start);
-      while (!gtk_text_iter_ends_sentence (start))
-        {
-          if (!gtk_text_iter_backward_char (start))
-            break;
-        }
-      break;
-
-    case ATK_TEXT_BOUNDARY_LINE_START:
-      line_number = gtk_text_iter_get_line (start);
-      if (line_number == 0)
-        {
-          gtk_text_buffer_get_iter_at_offset (buffer, start, 0);
-        }
-      else
-        {
-          gtk_text_iter_backward_line (start);
-          gtk_text_iter_forward_line (start);
-        }
-      *end = *start;
-      gtk_text_iter_backward_line (start);
-      break;
-
-    case ATK_TEXT_BOUNDARY_LINE_END:
-      line_number = gtk_text_iter_get_line (start);
-      if (line_number == 0)
-        {
-          gtk_text_buffer_get_iter_at_offset (buffer, start, 0);
-          *end = *start;
-        }
-      else
-        {
-          gtk_text_iter_backward_line (start);
-          *end = *start;
-          while (!gtk_text_iter_ends_line (start))
-            {
-              if (!gtk_text_iter_backward_char (start))
-                break;
-            }
-          gtk_text_iter_forward_to_line_end (end);
-        }
-      break;
-    }
 }
 
 void
 _gtk_text_buffer_get_text_at (GtkTextBuffer   *buffer,
-                              AtkTextBoundary  boundary_type,
                               GtkTextIter     *position,
                               GtkTextIter     *start,
                               GtkTextIter     *end)
@@ -4592,187 +4498,16 @@ _gtk_text_buffer_get_text_at (GtkTextBuffer   *buffer,
 
   *start = *position;
   *end = *start;
-
-  switch (boundary_type)
-    {
-    case ATK_TEXT_BOUNDARY_CHAR:
-      gtk_text_iter_forward_char (end);
-      break;
-
-    case ATK_TEXT_BOUNDARY_WORD_START:
-      if (!gtk_text_iter_starts_word (start))
-        gtk_text_iter_backward_word_start (start);
-      if (gtk_text_iter_inside_word (end))
-        gtk_text_iter_forward_word_end (end);
-      while (!gtk_text_iter_starts_word (end))
-        {
-          if (!gtk_text_iter_forward_char (end))
-            break;
-        }
-      break;
-
-    case ATK_TEXT_BOUNDARY_WORD_END:
-      if (gtk_text_iter_inside_word (start) &&
-          !gtk_text_iter_starts_word (start))
-        gtk_text_iter_backward_word_start (start);
-      while (!gtk_text_iter_ends_word (start))
-        {
-          if (!gtk_text_iter_backward_char (start))
-            break;
-        }
-      gtk_text_iter_forward_word_end (end);
-      break;
-
-    case ATK_TEXT_BOUNDARY_SENTENCE_START:
-      if (!gtk_text_iter_starts_sentence (start))
-        gtk_text_iter_backward_sentence_start (start);
-      if (gtk_text_iter_inside_sentence (end))
-        gtk_text_iter_forward_sentence_end (end);
-      while (!gtk_text_iter_starts_sentence (end))
-        {
-          if (!gtk_text_iter_forward_char (end))
-            break;
-        }
-      break;
-
-    case ATK_TEXT_BOUNDARY_SENTENCE_END:
-      if (gtk_text_iter_inside_sentence (start) &&
-          !gtk_text_iter_starts_sentence (start))
-        gtk_text_iter_backward_sentence_start (start);
-      while (!gtk_text_iter_ends_sentence (start))
-        {
-          if (!gtk_text_iter_backward_char (start))
-            break;
-        }
-      gtk_text_iter_forward_sentence_end (end);
-      break;
-
-    case ATK_TEXT_BOUNDARY_LINE_START:
-      line_number = gtk_text_iter_get_line (start);
-      if (line_number == 0)
-        {
-          gtk_text_buffer_get_iter_at_offset (buffer, start, 0);
-        }
-      else
-        {
-          gtk_text_iter_backward_line (start);
-          gtk_text_iter_forward_line (start);
-        }
-      gtk_text_iter_forward_line (end);
-      break;
-
-    case ATK_TEXT_BOUNDARY_LINE_END:
-      line_number = gtk_text_iter_get_line (start);
-      if (line_number == 0)
-        {
-          gtk_text_buffer_get_iter_at_offset (buffer, start, 0);
-        }
-      else
-        {
-          gtk_text_iter_backward_line (start);
-          gtk_text_iter_forward_line (start);
-        }
-      while (!gtk_text_iter_ends_line (start))
-        {
-          if (!gtk_text_iter_backward_char (start))
-            break;
-        }
-      gtk_text_iter_forward_to_line_end (end);
-      break;
-   }
 }
 
 void
 _gtk_text_buffer_get_text_after (GtkTextBuffer   *buffer,
-                                 AtkTextBoundary  boundary_type,
                                  GtkTextIter     *position,
                                  GtkTextIter     *start,
                                  GtkTextIter     *end)
 {
   *start = *position;
   *end = *start;
-
-  switch (boundary_type)
-    {
-    case ATK_TEXT_BOUNDARY_CHAR:
-      gtk_text_iter_forward_char (start);
-      gtk_text_iter_forward_chars (end, 2);
-      break;
-
-    case ATK_TEXT_BOUNDARY_WORD_START:
-      if (gtk_text_iter_inside_word (end))
-        gtk_text_iter_forward_word_end (end);
-      while (!gtk_text_iter_starts_word (end))
-        {
-          if (!gtk_text_iter_forward_char (end))
-            break;
-        }
-      *start = *end;
-      if (!gtk_text_iter_is_end (end))
-        {
-          gtk_text_iter_forward_word_end (end);
-          while (!gtk_text_iter_starts_word (end))
-            {
-              if (!gtk_text_iter_forward_char (end))
-                break;
-            }
-        }
-      break;
-
-    case ATK_TEXT_BOUNDARY_WORD_END:
-      gtk_text_iter_forward_word_end (end);
-      *start = *end;
-      if (!gtk_text_iter_is_end (end))
-        gtk_text_iter_forward_word_end (end);
-      break;
-
-    case ATK_TEXT_BOUNDARY_SENTENCE_START:
-      if (gtk_text_iter_inside_sentence (end))
-        gtk_text_iter_forward_sentence_end (end);
-      while (!gtk_text_iter_starts_sentence (end))
-        {
-          if (!gtk_text_iter_forward_char (end))
-            break;
-        }
-      *start = *end;
-      if (!gtk_text_iter_is_end (end))
-        {
-          gtk_text_iter_forward_sentence_end (end);
-          while (!gtk_text_iter_starts_sentence (end))
-            {
-              if (!gtk_text_iter_forward_char (end))
-                break;
-            }
-        }
-      break;
-
-    case ATK_TEXT_BOUNDARY_SENTENCE_END:
-      gtk_text_iter_forward_sentence_end (end);
-      *start = *end;
-      if (!gtk_text_iter_is_end (end))
-        gtk_text_iter_forward_sentence_end (end);
-      break;
-
-    case ATK_TEXT_BOUNDARY_LINE_START:
-      gtk_text_iter_forward_line (end);
-      *start = *end;
-      gtk_text_iter_forward_line (end);
-      break;
-
-    case ATK_TEXT_BOUNDARY_LINE_END:
-      gtk_text_iter_forward_line (start);
-      *end = *start;
-      if (!gtk_text_iter_is_end (start))
-        {
-          while (!gtk_text_iter_ends_line (start))
-            {
-              if (!gtk_text_iter_backward_char (start))
-                break;
-            }
-          gtk_text_iter_forward_to_line_end (end);
-        }
-      break;
-    }
 }
 
 static GtkTextTag *
diff --git a/gtk/gtktextbufferprivate.h b/gtk/gtktextbufferprivate.h
index 8d8363c..c163f0d 100644
--- a/gtk/gtktextbufferprivate.h
+++ b/gtk/gtktextbufferprivate.h
@@ -35,17 +35,14 @@ void _gtk_text_buffer_notify_will_remove_tag (GtkTextBuffer *buffer,
                                               GtkTextTag    *tag);
 
 void _gtk_text_buffer_get_text_before (GtkTextBuffer   *buffer,
-                                       AtkTextBoundary  boundary_type,
                                        GtkTextIter     *position,
                                        GtkTextIter     *start,
                                        GtkTextIter     *end);
 void _gtk_text_buffer_get_text_at     (GtkTextBuffer   *buffer,
-                                       AtkTextBoundary  boundary_type,
                                        GtkTextIter     *position,
                                        GtkTextIter     *start,
                                        GtkTextIter     *end);
 void _gtk_text_buffer_get_text_after  (GtkTextBuffer   *buffer,
-                                       AtkTextBoundary  boundary_type,
                                        GtkTextIter     *position,
                                        GtkTextIter     *start,
                                        GtkTextIter     *end);
diff --git a/gtk/gtktextview.c b/gtk/gtktextview.c
index 394da40..2873283 100644
--- a/gtk/gtktextview.c
+++ b/gtk/gtktextview.c
@@ -1706,7 +1706,6 @@ G_GNUC_END_IGNORE_DEPRECATIONS
 				"move-focus", 1,
 				GTK_TYPE_DIRECTION_TYPE, GTK_DIR_TAB_BACKWARD);
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_TEXT_VIEW_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "textview");
 
   quark_text_selection_data = g_quark_from_static_string ("gtk-text-view-text-selection-data");
@@ -2016,7 +2015,6 @@ gtk_text_view_set_buffer (GtkTextView   *text_view,
         gtk_text_view_update_handles (text_view, GTK_TEXT_HANDLE_MODE_NONE);
     }
 
-  _gtk_text_view_accessible_set_buffer (text_view, old_buffer);
   if (old_buffer)
     g_object_unref (old_buffer);
 
diff --git a/gtk/gtktogglebutton.c b/gtk/gtktogglebutton.c
index f594d8c..17579db 100644
--- a/gtk/gtktogglebutton.c
+++ b/gtk/gtktogglebutton.c
@@ -222,7 +222,6 @@ gtk_toggle_button_class_init (GtkToggleButtonClass *class)
 		  NULL,
 		  G_TYPE_NONE, 0);
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_TOGGLE_BUTTON_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "button");
 }
 
diff --git a/gtk/gtktoolbar.c b/gtk/gtktoolbar.c
index 79164f3..1b94c08 100644
--- a/gtk/gtktoolbar.c
+++ b/gtk/gtktoolbar.c
@@ -413,8 +413,6 @@ gtk_toolbar_class_init (GtkToolbarClass *klass)
   widget_class->style_updated = gtk_toolbar_style_updated;
   widget_class->focus = gtk_toolbar_focus;
 
-  gtk_widget_class_set_accessible_role (widget_class, ATK_ROLE_TOOL_BAR);
-
   /* need to override the base class function via override_class_handler,
    * because the signal slot is not available in GtkWidgetClass
    */
diff --git a/gtk/gtktoolbutton.c b/gtk/gtktoolbutton.c
index e56f28b..6a432ea 100644
--- a/gtk/gtktoolbutton.c
+++ b/gtk/gtktoolbutton.c
@@ -1193,7 +1193,6 @@ gtk_tool_button_set_label (GtkToolButton *button,
 {
   gchar *old_label;
   gchar *elided_label;
-  AtkObject *accessible;
   
   g_return_if_fail (GTK_IS_TOOL_BUTTON (button));
 
@@ -1205,8 +1204,6 @@ gtk_tool_button_set_label (GtkToolButton *button,
   if (label)
     {
       elided_label = _gtk_toolbar_elide_underscores (label);
-      accessible = gtk_widget_get_accessible (GTK_WIDGET (button->priv->button));
-      atk_object_set_name (accessible, elided_label);
       g_free (elided_label);
     }
 
diff --git a/gtk/gtktooltipwindow.c b/gtk/gtktooltipwindow.c
index a88a64f..9333232 100644
--- a/gtk/gtktooltipwindow.c
+++ b/gtk/gtktooltipwindow.c
@@ -64,7 +64,6 @@ gtk_tooltip_window_class_init (GtkTooltipWindowClass *klass)
   GtkWidgetClass *widget_class = GTK_WIDGET_CLASS (klass);
 
   gtk_widget_class_set_css_name (widget_class, I_("tooltip"));
-  gtk_widget_class_set_accessible_role (widget_class, ATK_ROLE_TOOL_TIP);
   gtk_widget_class_set_template_from_resource (widget_class, "/org/gtk/libgtk/ui/gtktooltipwindow.ui");
 
   gtk_widget_class_bind_template_child (widget_class, GtkTooltipWindow, box);
diff --git a/gtk/gtktreeselection.c b/gtk/gtktreeselection.c
index 677a277..9b588f6 100644
--- a/gtk/gtktreeselection.c
+++ b/gtk/gtktreeselection.c
@@ -1638,12 +1638,10 @@ gtk_tree_selection_real_select_node (GtkTreeSelection *selection,
       if (!GTK_RBNODE_FLAG_SET (node, GTK_RBNODE_IS_SELECTED))
         {
           GTK_RBNODE_SET_FLAG (node, GTK_RBNODE_IS_SELECTED);
-          _gtk_tree_view_accessible_add_state (priv->tree_view, tree, node, GTK_CELL_RENDERER_SELECTED);
         }
       else
         {
           GTK_RBNODE_UNSET_FLAG (node, GTK_RBNODE_IS_SELECTED);
-          _gtk_tree_view_accessible_remove_state (priv->tree_view, tree, node, GTK_CELL_RENDERER_SELECTED);
         }
 
       _gtk_tree_view_queue_draw_node (priv->tree_view, tree, node, NULL);
diff --git a/gtk/gtktreeview.c b/gtk/gtktreeview.c
index b6a4290..63339e3 100644
--- a/gtk/gtktreeview.c
+++ b/gtk/gtktreeview.c
@@ -1811,7 +1811,6 @@ G_GNUC_END_IGNORE_DEPRECATIONS
 
   gtk_binding_entry_add_signal (binding_set, GDK_KEY_F, GDK_CONTROL_MASK, "start-interactive-search", 0);
 
-  gtk_widget_class_set_accessible_type (widget_class, GTK_TYPE_TREE_VIEW_ACCESSIBLE);
   gtk_widget_class_set_css_name (widget_class, "treeview");
 }
 
@@ -9029,8 +9028,6 @@ gtk_tree_view_row_changed (GtkTreeModel *model,
   if (tree == NULL)
     goto done;
 
-  _gtk_tree_view_accessible_changed (tree_view, tree, node);
-
   if (tree_view->priv->fixed_height_mode
       && tree_view->priv->fixed_height >= 0)
     {
@@ -9159,8 +9156,6 @@ gtk_tree_view_row_inserted (GtkTreeModel *model,
       tmpnode = _gtk_rbtree_insert_after (tree, tmpnode, height, FALSE);
     }
 
-  _gtk_tree_view_accessible_add (tree_view, tree, tmpnode);
-
  done:
   if (height > 0)
     {
@@ -9223,12 +9218,10 @@ gtk_tree_view_row_has_child_toggled (GtkTreeModel *model,
   if (has_child)
     {
       GTK_RBNODE_SET_FLAG (node, GTK_RBNODE_IS_PARENT);
-      _gtk_tree_view_accessible_add_state (tree_view, tree, node, GTK_CELL_RENDERER_EXPANDABLE);
     }
   else
     {
       GTK_RBNODE_UNSET_FLAG (node, GTK_RBNODE_IS_PARENT);
-      _gtk_tree_view_accessible_remove_state (tree_view, tree, node, GTK_CELL_RENDERER_EXPANDABLE);
     }
 
   if (has_child && tree_view->priv->is_list)
@@ -9378,15 +9371,10 @@ gtk_tree_view_row_deleted (GtkTreeModel *model,
       if (tree_view->priv->tree == tree)
 	tree_view->priv->tree = NULL;
 
-      _gtk_tree_view_accessible_remove_state (tree_view,
-                                              tree->parent_tree, tree->parent_node,
-                                              GTK_CELL_RENDERER_EXPANDED);
-      _gtk_tree_view_accessible_remove (tree_view, tree, NULL);
       _gtk_rbtree_remove (tree);
     }
   else
     {
-      _gtk_tree_view_accessible_remove (tree_view, tree, node);
       _gtk_rbtree_remove_node (tree, node);
     }
 
@@ -9460,8 +9448,6 @@ gtk_tree_view_rows_reordered (GtkTreeModel *model,
 
   _gtk_rbtree_reorder (tree, new_order, len);
 
-  _gtk_tree_view_accessible_reorder (tree_view);
-
   gtk_widget_queue_draw (GTK_WIDGET (tree_view));
 
   gtk_tree_view_dy_to_top_row (tree_view);
@@ -10293,9 +10279,6 @@ _gtk_tree_view_set_focus_column (GtkTreeView       *tree_view,
 
   tree_view->priv->focus_column = column;
 
-  _gtk_tree_view_accessible_update_focus_column (tree_view, 
-                                                 old_column,
-                                                 column);
 }
 
 
@@ -11593,7 +11576,6 @@ gtk_tree_view_set_model (GtkTreeView  *tree_view,
 	{
 	  tree_view->priv->tree = _gtk_rbtree_new ();
 	  gtk_tree_view_build_tree (tree_view, tree_view->priv->tree, &iter, 1, FALSE);
-          _gtk_tree_view_accessible_add (tree_view, tree_view->priv->tree, NULL);
 	}
       gtk_tree_path_free (path);
 
@@ -12145,8 +12127,6 @@ gtk_tree_view_remove_column (GtkTreeView       *tree_view,
       gtk_widget_queue_resize (GTK_WIDGET (tree_view));
     }
 
-  _gtk_tree_view_accessible_remove_column (tree_view, column, position);
-
   g_object_unref (column);
   g_signal_emit (tree_view, tree_view_signals[COLUMNS_CHANGED], 0);
 
@@ -12217,8 +12197,6 @@ gtk_tree_view_insert_column (GtkTreeView       *tree_view,
       gtk_widget_queue_resize (GTK_WIDGET (tree_view));
     }
 
-  _gtk_tree_view_accessible_add_column (tree_view, column, position);
-
   g_signal_emit (tree_view, tree_view_signals[COLUMNS_CHANGED], 0);
 
   return tree_view->priv->n_columns;
@@ -12436,8 +12414,6 @@ gtk_tree_view_move_column_after (GtkTreeView       *tree_view,
       gtk_tree_view_size_allocate_columns (GTK_WIDGET (tree_view), NULL);
     }
 
-  _gtk_tree_view_accessible_reorder_column (tree_view, column);
-
   g_signal_emit (tree_view, tree_view_signals[COLUMNS_CHANGED], 0);
 }
 
@@ -12910,11 +12886,6 @@ gtk_tree_view_real_expand_row (GtkTreeView *tree_view,
 			    gtk_tree_path_get_depth (path) + 1,
 			    open_all);
 
-  _gtk_tree_view_accessible_add (tree_view, node->children, NULL);
-  _gtk_tree_view_accessible_add_state (tree_view,
-                                       tree, node,
-                                       GTK_CELL_RENDERER_EXPANDED);
-
   install_presize_handler (tree_view);
 
   g_signal_emit (tree_view, tree_view_signals[ROW_EXPANDED], 0, &iter, path);
@@ -13061,11 +13032,6 @@ gtk_tree_view_real_collapse_row (GtkTreeView *tree_view,
   /* Stop a pending double click */
   gtk_event_controller_reset (GTK_EVENT_CONTROLLER (tree_view->priv->multipress_gesture));
 
-  _gtk_tree_view_accessible_remove (tree_view, node->children, NULL);
-  _gtk_tree_view_accessible_remove_state (tree_view,
-                                          tree, node,
-                                          GTK_CELL_RENDERER_EXPANDED);
-
   _gtk_rbtree_remove (node->children);
 
   if (cursor_changed)
@@ -13284,10 +13250,6 @@ gtk_tree_view_real_set_cursor (GtkTreeView     *tree_view,
 {
   if (!(flags & CURSOR_INVALID) && tree_view->priv->cursor_node)
     {
-      _gtk_tree_view_accessible_remove_state (tree_view,
-                                              tree_view->priv->cursor_tree,
-                                              tree_view->priv->cursor_node,
-                                              GTK_CELL_RENDERER_FOCUSED);
       _gtk_tree_view_queue_draw_node (tree_view,
                                       tree_view->priv->cursor_tree,
                                       tree_view->priv->cursor_node,
@@ -13352,10 +13314,6 @@ gtk_tree_view_real_set_cursor (GtkTreeView     *tree_view,
                                           NULL);
 	}
 
-      _gtk_tree_view_accessible_add_state (tree_view,
-                                           tree_view->priv->cursor_tree,
-                                           tree_view->priv->cursor_node,
-                                           GTK_CELL_RENDERER_FOCUSED);
     }
 
   if (!gtk_widget_in_destruction (GTK_WIDGET (tree_view)))
diff --git a/gtk/gtktreeviewcolumn.c b/gtk/gtktreeviewcolumn.c
index 366b3aa..4159f85 100644
--- a/gtk/gtktreeviewcolumn.c
+++ b/gtk/gtktreeviewcolumn.c
@@ -1889,12 +1889,6 @@ gtk_tree_view_column_set_visible (GtkTreeViewColumn *tree_column,
   if (priv->visible)
     _gtk_tree_view_column_cell_set_dirty (tree_column, TRUE);
 
-  if (priv->tree_view)
-    {
-      _gtk_tree_view_accessible_toggle_visibility (GTK_TREE_VIEW (priv->tree_view),
-                                                   tree_column);
-    }
-
   gtk_tree_view_column_update_button (tree_column);
   g_object_notify_by_pspec (G_OBJECT (tree_column), tree_column_props[PROP_VISIBLE]);
 }
diff --git a/gtk/gtkviewport.c b/gtk/gtkviewport.c
index 601d5a1..c81ce62 100644
--- a/gtk/gtkviewport.c
+++ b/gtk/gtkviewport.c
@@ -390,8 +390,6 @@ gtk_viewport_class_init (GtkViewportClass *class)
   widget_class->get_preferred_height_for_width = gtk_viewport_get_preferred_height_for_width;
   widget_class->queue_draw_region = gtk_viewport_queue_draw_region;
   
-  gtk_widget_class_set_accessible_role (widget_class, ATK_ROLE_VIEWPORT);
-
   container_class->remove = gtk_viewport_remove;
   container_class->add = gtk_viewport_add;
   gtk_container_class_handle_border_width (container_class);
diff --git a/gtk/gtkvolumebutton.c b/gtk/gtkvolumebutton.c
index f406492..e6a103c 100644
--- a/gtk/gtkvolumebutton.c
+++ b/gtk/gtkvolumebutton.c
@@ -183,10 +183,6 @@ gtk_volume_button_init (GtkVolumeButton *button)
   GtkWidget *widget = GTK_WIDGET (button);
 
   gtk_widget_init_template (widget);
-
-  /* The atk action description is not supported by GtkBuilder */
-  atk_action_set_description (ATK_ACTION (gtk_widget_get_accessible (GTK_WIDGET (widget))),
-			      1, _("Adjusts the volume"));
 }
 
 /**
@@ -220,9 +216,6 @@ cb_query_tooltip (GtkWidget  *button,
   GtkAdjustment *adjustment;
   gdouble val;
   char *str;
-  AtkImage *image;
-
-  image = ATK_IMAGE (gtk_widget_get_accessible (button));
 
   adjustment = gtk_scale_button_get_adjustment (scale_button);
   val = gtk_scale_button_get_value (scale_button);
@@ -250,7 +243,6 @@ cb_query_tooltip (GtkWidget  *button,
     }
 
   gtk_tooltip_set_text (tooltip, str);
-  atk_image_set_image_description (image, str);
   g_free (str);
 
   return TRUE;
diff --git a/gtk/gtkwidget.c b/gtk/gtkwidget.c
index b6e0011..789905a 100644
--- a/gtk/gtkwidget.c
+++ b/gtk/gtkwidget.c
@@ -496,8 +496,6 @@ typedef struct {
 struct _GtkWidgetClassPrivate
 {
   GtkWidgetTemplate *template;
-  GType accessible_type;
-  AtkRole accessible_role;
   const char *css_name;
 };
 
@@ -738,9 +736,6 @@ static void             gtk_widget_real_state_flags_changed     (GtkWidget
                                                                  GtkStateFlags     old_state);
 static void             gtk_widget_real_queue_draw_region       (GtkWidget         *widget,
 								 const cairo_region_t *region);
-static AtkObject*	gtk_widget_real_get_accessible		(GtkWidget	  *widget);
-static void		gtk_widget_accessible_interface_init	(AtkImplementorIface *iface);
-static AtkObject*	gtk_widget_ref_accessible		(AtkImplementor *implementor);
 static void             gtk_widget_invalidate_widget_windows    (GtkWidget        *widget,
 								 cairo_region_t        *region);
 static GdkScreen *      gtk_widget_get_screen_unchecked         (GtkWidget        *widget);
@@ -878,13 +873,6 @@ gtk_widget_get_type (void)
 	NULL,		/* value_table */
       };
 
-      const GInterfaceInfo accessibility_info =
-      {
-	(GInterfaceInitFunc) gtk_widget_accessible_interface_init,
-	(GInterfaceFinalizeFunc) NULL,
-	NULL /* interface data */
-      };
-
       const GInterfaceInfo buildable_info =
       {
 	(GInterfaceInitFunc) gtk_widget_buildable_interface_init,
@@ -900,8 +888,6 @@ gtk_widget_get_type (void)
       GtkWidget_private_offset =
         g_type_add_instance_private (widget_type, sizeof (GtkWidgetPrivate));
 
-      g_type_add_interface_static (widget_type, ATK_TYPE_IMPLEMENTOR,
-                                   &accessibility_info) ;
       g_type_add_interface_static (widget_type, GTK_TYPE_BUILDABLE,
                                    &buildable_info) ;
     }
@@ -1106,11 +1092,6 @@ gtk_widget_class_init (GtkWidgetClass *klass)
 
   klass->show_help = gtk_widget_real_show_help;
 
-  /* Accessibility support */
-  klass->priv->accessible_type = GTK_TYPE_ACCESSIBLE;
-  klass->priv->accessible_role = ATK_ROLE_INVALID;
-  klass->get_accessible = gtk_widget_real_get_accessible;
-
   klass->adjust_size_request = gtk_widget_real_adjust_size_request;
   klass->adjust_baseline_request = gtk_widget_real_adjust_baseline_request;
   klass->adjust_size_allocation = gtk_widget_real_adjust_size_allocation;
@@ -3722,7 +3703,6 @@ G_GNUC_END_IGNORE_DEPRECATIONS
                                                              1, G_MAXINT, 20,
                                                              GTK_PARAM_READABLE));
 
-  gtk_widget_class_set_accessible_type (klass, GTK_TYPE_WIDGET_ACCESSIBLE);
   gtk_widget_class_set_css_name (klass, "widget");
 }
 
@@ -12332,13 +12312,6 @@ gtk_widget_real_destroy (GtkWidget *object)
 	}
     }
 
-  if (priv->accessible)
-    {
-      gtk_accessible_set_widget (GTK_ACCESSIBLE (priv->accessible), NULL);
-      g_object_unref (priv->accessible);
-      priv->accessible = NULL;
-    }
-
   /* wipe accelerator closures (keep order) */
   g_object_set_qdata (G_OBJECT (widget), quark_accel_path, NULL);
   g_object_set_qdata (G_OBJECT (widget), quark_accel_closures, NULL);
@@ -12371,8 +12344,6 @@ gtk_widget_finalize (GObject *object)
 
   g_free (priv->name);
 
-  g_clear_object (&priv->accessible);
-
   gtk_widget_clear_path (widget);
 
   gtk_css_widget_node_widget_destroyed (GTK_CSS_WIDGET_NODE (priv->cssnode));
@@ -13420,190 +13391,6 @@ G_DEFINE_BOXED_TYPE (GtkRequisition, gtk_requisition,
                      gtk_requisition_copy,
                      gtk_requisition_free)
 
-/**
- * gtk_widget_class_set_accessible_type:
- * @widget_class: class to set the accessible type for
- * @type: The object type that implements the accessible for @widget_class
- *
- * Sets the type to be used for creating accessibles for widgets of
- * @widget_class. The given @type must be a subtype of the type used for
- * accessibles of the parent class.
- *
- * This function should only be called from class init functions of widgets.
- *
- * Since: 3.2
- **/
-void
-gtk_widget_class_set_accessible_type (GtkWidgetClass *widget_class,
-                                      GType           type)
-{
-  GtkWidgetClassPrivate *priv;
-
-  g_return_if_fail (GTK_IS_WIDGET_CLASS (widget_class));
-  g_return_if_fail (g_type_is_a (type, widget_class->priv->accessible_type));
-
-  priv = widget_class->priv;
-
-  priv->accessible_type = type;
-  /* reset this - honoring the type's role is better. */
-  priv->accessible_role = ATK_ROLE_INVALID;
-}
-
-/**
- * gtk_widget_class_set_accessible_role:
- * @widget_class: class to set the accessible role for
- * @role: The role to use for accessibles created for @widget_class
- *
- * Sets the default #AtkRole to be set on accessibles created for
- * widgets of @widget_class. Accessibles may decide to not honor this
- * setting if their role reporting is more refined. Calls to 
- * gtk_widget_class_set_accessible_type() will reset this value.
- *
- * In cases where you want more fine-grained control over the role of
- * accessibles created for @widget_class, you should provide your own
- * accessible type and use gtk_widget_class_set_accessible_type()
- * instead.
- *
- * If @role is #ATK_ROLE_INVALID, the default role will not be changed
- * and the accessible’s default role will be used instead.
- *
- * This function should only be called from class init functions of widgets.
- *
- * Since: 3.2
- **/
-void
-gtk_widget_class_set_accessible_role (GtkWidgetClass *widget_class,
-                                      AtkRole         role)
-{
-  GtkWidgetClassPrivate *priv;
-
-  g_return_if_fail (GTK_IS_WIDGET_CLASS (widget_class));
-
-  priv = widget_class->priv;
-
-  priv->accessible_role = role;
-}
-
-/**
- * _gtk_widget_peek_accessible:
- * @widget: a #GtkWidget
- *
- * Gets the accessible for @widget, if it has been created yet.
- * Otherwise, this function returns %NULL. If the @widget’s implementation
- * does not use the default way to create accessibles, %NULL will always be
- * returned.
- *
- * Returns: (nullable): the accessible for @widget or %NULL if none has been
- *     created yet.
- **/
-AtkObject *
-_gtk_widget_peek_accessible (GtkWidget *widget)
-{
-  return widget->priv->accessible;
-}
-
-/**
- * gtk_widget_get_accessible:
- * @widget: a #GtkWidget
- *
- * Returns the accessible object that describes the widget to an
- * assistive technology.
- *
- * If accessibility support is not available, this #AtkObject
- * instance may be a no-op. Likewise, if no class-specific #AtkObject
- * implementation is available for the widget instance in question,
- * it will inherit an #AtkObject implementation from the first ancestor
- * class for which such an implementation is defined.
- *
- * The documentation of the
- * [ATK](http://developer.gnome.org/atk/stable/)
- * library contains more information about accessible objects and their uses.
- *
- * Returns: (transfer none): the #AtkObject associated with @widget
- */
-AtkObject*
-gtk_widget_get_accessible (GtkWidget *widget)
-{
-  g_return_val_if_fail (GTK_IS_WIDGET (widget), NULL);
-
-  return GTK_WIDGET_GET_CLASS (widget)->get_accessible (widget);
-}
-
-static AtkObject*
-gtk_widget_real_get_accessible (GtkWidget *widget)
-{
-  AtkObject* accessible;
-
-  accessible = widget->priv->accessible;
-
-  if (!accessible)
-    {
-      GtkWidgetClass *widget_class;
-      GtkWidgetClassPrivate *priv;
-      AtkObjectFactory *factory;
-      AtkRegistry *default_registry;
-
-      widget_class = GTK_WIDGET_GET_CLASS (widget);
-      priv = widget_class->priv;
-
-      if (priv->accessible_type == GTK_TYPE_ACCESSIBLE)
-        {
-          default_registry = atk_get_default_registry ();
-          factory = atk_registry_get_factory (default_registry,
-                                              G_TYPE_FROM_INSTANCE (widget));
-          accessible = atk_object_factory_create_accessible (factory, G_OBJECT (widget));
-
-          if (priv->accessible_role != ATK_ROLE_INVALID)
-            atk_object_set_role (accessible, priv->accessible_role);
-
-          widget->priv->accessible = accessible;
-        }
-      else
-        {
-          accessible = g_object_new (priv->accessible_type,
-                                     "widget", widget,
-                                     NULL);
-          if (priv->accessible_role != ATK_ROLE_INVALID)
-            atk_object_set_role (accessible, priv->accessible_role);
-
-          widget->priv->accessible = accessible;
-
-          atk_object_initialize (accessible, widget);
-
-          /* Set the role again, since we don't want a role set
-           * in some parent initialize() function to override
-           * our own.
-           */
-          if (priv->accessible_role != ATK_ROLE_INVALID)
-            atk_object_set_role (accessible, priv->accessible_role);
-        }
-
-    }
-
-  return accessible;
-}
-
-/*
- * Initialize a AtkImplementorIface instance’s virtual pointers as
- * appropriate to this implementor’s class (GtkWidget).
- */
-static void
-gtk_widget_accessible_interface_init (AtkImplementorIface *iface)
-{
-  iface->ref_accessible = gtk_widget_ref_accessible;
-}
-
-static AtkObject*
-gtk_widget_ref_accessible (AtkImplementor *implementor)
-{
-  AtkObject *accessible;
-
-  accessible = gtk_widget_get_accessible (GTK_WIDGET (implementor));
-  if (accessible)
-    g_object_ref (accessible);
-  return accessible;
-}
-
 /*
  * Expand flag management
  */
@@ -14072,9 +13859,6 @@ gtk_widget_buildable_get_internal_child (GtkBuildable *buildable,
   GSList *l;
   GType internal_child_type = 0;
 
-  if (strcmp (childname, "accessible") == 0)
-    return G_OBJECT (gtk_widget_get_accessible (GTK_WIDGET (buildable)));
-
   /* Find a widget type which has declared an automated child as internal by
    * the name 'childname', if any.
    */
@@ -14122,44 +13906,10 @@ gtk_widget_buildable_set_buildable_property (GtkBuildable *buildable,
     g_object_set_property (G_OBJECT (buildable), name, value);
 }
 
-typedef struct
-{
-  gchar *action_name;
-  GString *description;
-  gchar *context;
-  gboolean translatable;
-} AtkActionData;
-
-typedef struct
-{
-  gchar *target;
-  AtkRelationType type;
-  gint line;
-  gint col;
-} AtkRelationData;
-
-static void
-free_action (AtkActionData *data, gpointer user_data)
-{
-  g_free (data->action_name);
-  g_string_free (data->description, TRUE);
-  g_free (data->context);
-  g_slice_free (AtkActionData, data);
-}
-
-static void
-free_relation (AtkRelationData *data, gpointer user_data)
-{
-  g_free (data->target);
-  g_slice_free (AtkRelationData, data);
-}
-
 static void
 gtk_widget_buildable_parser_finished (GtkBuildable *buildable,
 				      GtkBuilder   *builder)
 {
-  GSList *atk_relations;
-
   if (g_object_get_qdata (G_OBJECT (buildable), quark_builder_has_default))
     {
       gtk_widget_grab_default (GTK_WIDGET (buildable));
@@ -14171,37 +13921,6 @@ gtk_widget_buildable_parser_finished (GtkBuildable *buildable,
       gtk_widget_grab_focus (GTK_WIDGET (buildable));
       g_object_steal_qdata (G_OBJECT (buildable), quark_builder_has_focus);
     }
-
-  atk_relations = g_object_get_qdata (G_OBJECT (buildable),
-				      quark_builder_atk_relations);
-  if (atk_relations)
-    {
-      AtkObject *accessible;
-      AtkRelationSet *relation_set;
-      GSList *l;
-      GObject *target;
-      AtkObject *target_accessible;
-
-      accessible = gtk_widget_get_accessible (GTK_WIDGET (buildable));
-      relation_set = atk_object_ref_relation_set (accessible);
-
-      for (l = atk_relations; l; l = l->next)
-	{
-	  AtkRelationData *relation = (AtkRelationData*)l->data;
-
-	  target = _gtk_builder_lookup_object (builder, relation->target, relation->line, relation->col);
-	  if (!target)
-	    continue;
-	  target_accessible = gtk_widget_get_accessible (GTK_WIDGET (target));
-	  g_assert (target_accessible != NULL);
-
-	  atk_relation_set_add_relation_by_type (relation_set, relation->type, target_accessible);
-	}
-      g_object_unref (relation_set);
-
-      g_slist_free_full (atk_relations, (GDestroyNotify) free_relation);
-      g_object_steal_qdata (G_OBJECT (buildable), quark_builder_atk_relations);
-    }
 }
 
 typedef struct
@@ -14211,125 +13930,6 @@ typedef struct
   GSList *relations;
 } AccessibilitySubParserData;
 
-static void
-accessibility_start_element (GMarkupParseContext  *context,
-                             const gchar          *element_name,
-                             const gchar         **names,
-                             const gchar         **values,
-                             gpointer              user_data,
-                             GError              **error)
-{
-  AccessibilitySubParserData *data = (AccessibilitySubParserData*)user_data;
-
-  if (strcmp (element_name, "relation") == 0)
-    {
-      gchar *target = NULL;
-      gchar *type = NULL;
-      AtkRelationData *relation;
-      AtkRelationType relation_type;
-
-      if (!_gtk_builder_check_parent (data->builder, context, "accessibility", error))
-        return;
-
-      if (!g_markup_collect_attributes (element_name, names, values, error,
-                                        G_MARKUP_COLLECT_STRING, "target", &target,
-                                        G_MARKUP_COLLECT_STRING, "type", &type,
-                                        G_MARKUP_COLLECT_INVALID))
-        {
-          _gtk_builder_prefix_error (data->builder, context, error);
-          return;
-        }
-
-      relation_type = atk_relation_type_for_name (type);
-      if (relation_type == ATK_RELATION_NULL)
-        {
-          g_set_error (error,
-                       GTK_BUILDER_ERROR,
-                       GTK_BUILDER_ERROR_INVALID_VALUE,
-                       "No such relation type: '%s'", type);
-          _gtk_builder_prefix_error (data->builder, context, error);
-          return;
-        }
-
-      relation = g_slice_new (AtkRelationData);
-      relation->target = g_strdup (target);
-      relation->type = relation_type;
-
-      data->relations = g_slist_prepend (data->relations, relation);
-    }
-  else if (strcmp (element_name, "action") == 0)
-    {
-      const gchar *action_name;
-      const gchar *description = NULL;
-      const gchar *msg_context = NULL;
-      gboolean translatable = FALSE;
-      AtkActionData *action;
-
-      if (!_gtk_builder_check_parent (data->builder, context, "accessibility", error))
-        return;
-
-      if (!g_markup_collect_attributes (element_name, names, values, error,
-                                        G_MARKUP_COLLECT_STRING, "action_name", &action_name,
-                                        G_MARKUP_COLLECT_STRING|G_MARKUP_COLLECT_OPTIONAL, "description", &description,
-                                        G_MARKUP_COLLECT_STRING|G_MARKUP_COLLECT_OPTIONAL, "comments", NULL,
-                                        G_MARKUP_COLLECT_STRING|G_MARKUP_COLLECT_OPTIONAL, "context", &msg_context,
-                                        G_MARKUP_COLLECT_BOOLEAN|G_MARKUP_COLLECT_OPTIONAL, "translatable", &translatable,
-                                        G_MARKUP_COLLECT_INVALID))
-        {
-          _gtk_builder_prefix_error (data->builder, context, error);
-          return;
-        }
-
-      action = g_slice_new (AtkActionData);
-      action->action_name = g_strdup (action_name);
-      action->description = g_string_new (description);
-      action->context = g_strdup (msg_context);
-      action->translatable = translatable;
-
-      data->actions = g_slist_prepend (data->actions, action);
-    }
-  else if (strcmp (element_name, "accessibility") == 0)
-    {
-      if (!_gtk_builder_check_parent (data->builder, context, "object", error))
-        return;
-
-      if (!g_markup_collect_attributes (element_name, names, values, error,
-                                        G_MARKUP_COLLECT_INVALID, NULL, NULL,
-                                        G_MARKUP_COLLECT_INVALID))
-        _gtk_builder_prefix_error (data->builder, context, error);
-    }
-  else
-    {
-      _gtk_builder_error_unhandled_tag (data->builder, context,
-                                        "GtkWidget", element_name,
-                                        error);
-    }
-}
-
-static void
-accessibility_text (GMarkupParseContext  *context,
-                    const gchar          *text,
-                    gsize                 text_len,
-                    gpointer              user_data,
-                    GError              **error)
-{
-  AccessibilitySubParserData *data = (AccessibilitySubParserData*)user_data;
-
-  if (strcmp (g_markup_parse_context_get_element (context), "action") == 0)
-    {
-      AtkActionData *action = data->actions->data;
-
-      g_string_append_len (action->description, text, text_len);
-    }
-}
-
-static const GMarkupParser accessibility_parser =
-  {
-    accessibility_start_element,
-    NULL,
-    accessibility_text,
-  };
-
 typedef struct
 {
   GObject *object;
@@ -14492,19 +14092,6 @@ gtk_widget_buildable_custom_tag_start (GtkBuildable     *buildable,
       return TRUE;
     }
 
-  if (strcmp (tagname, "accessibility") == 0)
-    {
-      AccessibilitySubParserData *data;
-
-      data = g_slice_new0 (AccessibilitySubParserData);
-      data->builder = builder;
-
-      *parser = accessibility_parser;
-      *parser_data = data;
-
-      return TRUE;
-    }
-
   if (strcmp (tagname, "style") == 0)
     {
       StyleParserData *data;
@@ -14578,62 +14165,6 @@ gtk_widget_buildable_custom_finished (GtkBuildable *buildable,
 
       _gtk_widget_buildable_finish_accelerator (GTK_WIDGET (buildable), toplevel, user_data);
     }
-  else if (strcmp (tagname, "accessibility") == 0)
-    {
-      AccessibilitySubParserData *a11y_data;
-
-      a11y_data = (AccessibilitySubParserData*)user_data;
-
-      if (a11y_data->actions)
-	{
-	  AtkObject *accessible;
-	  AtkAction *action;
-	  gint i, n_actions;
-	  GSList *l;
-
-	  accessible = gtk_widget_get_accessible (GTK_WIDGET (buildable));
-
-          if (ATK_IS_ACTION (accessible))
-            {
-	      action = ATK_ACTION (accessible);
-	      n_actions = atk_action_get_n_actions (action);
-
-	      for (l = a11y_data->actions; l; l = l->next)
-	        {
-	          AtkActionData *action_data = (AtkActionData*)l->data;
-
-	          for (i = 0; i < n_actions; i++)
-		    if (strcmp (atk_action_get_name (action, i),
-		  	        action_data->action_name) == 0)
-		      break;
-
-	          if (i < n_actions)
-                    {
-                      const gchar *description;
-
-                      if (action_data->translatable && action_data->description->len)
-                        description = _gtk_builder_parser_translate (gtk_builder_get_translation_domain (builder),
-                                                                     action_data->context,
-                                                                     action_data->description->str);
-                      else
-                        description = action_data->description->str;
-
-		      atk_action_set_description (action, i, description);
-                    }
-                }
-	    }
-          else
-            g_warning ("accessibility action on a widget that does not implement AtkAction");
-
-	  g_slist_free_full (a11y_data->actions, (GDestroyNotify) free_action);
-	}
-
-      if (a11y_data->relations)
-	g_object_set_qdata (G_OBJECT (buildable), quark_builder_atk_relations,
-			    a11y_data->relations);
-
-      g_slice_free (AccessibilitySubParserData, a11y_data);
-    }
   else if (strcmp (tagname, "style") == 0)
     {
       StyleParserData *style_data = (StyleParserData *)user_data;
diff --git a/gtk/gtkwidget.h b/gtk/gtkwidget.h
index 3dada84..27dbd68 100644
--- a/gtk/gtkwidget.h
+++ b/gtk/gtkwidget.h
@@ -33,7 +33,6 @@
 #include <gtk/gtkaccelgroup.h>
 #include <gtk/gtkborder.h>
 #include <gtk/gtktypes.h>
-#include <atk/atk.h>
 
 G_BEGIN_DECLS
 
@@ -305,8 +304,6 @@ struct _GtkWidget
  * @popup_menu: Signal emitted whenever a widget should pop up a
  *   context menu.
  * @show_help:
- * @get_accessible: Returns the accessible object that describes the
- *   widget to an assistive technology.
  * @screen_changed: Signal emitted when the screen of a widget has
  *   changed.
  * @can_activate_accel: Signal allows applications and derived widgets
@@ -549,8 +546,6 @@ struct _GtkWidgetClass
 
   /* accessibility support
    */
-  AtkObject *  (* get_accessible)     (GtkWidget *widget);
-
   void         (* screen_changed)     (GtkWidget *widget,
                                        GdkScreen *previous_screen);
   gboolean     (* can_activate_accel) (GtkWidget *widget,
@@ -1056,16 +1051,6 @@ GDK_AVAILABLE_IN_ALL
 void             gtk_widget_set_support_multidevice (GtkWidget      *widget,
                                                      gboolean        support_multidevice);
 
-/* Accessibility support */
-GDK_AVAILABLE_IN_3_2
-void             gtk_widget_class_set_accessible_type    (GtkWidgetClass     *widget_class,
-                                                          GType               type);
-GDK_AVAILABLE_IN_3_2
-void             gtk_widget_class_set_accessible_role    (GtkWidgetClass     *widget_class,
-                                                          AtkRole             role);
-GDK_AVAILABLE_IN_ALL
-AtkObject*       gtk_widget_get_accessible               (GtkWidget          *widget);
-
 
 /* Margin and alignment */
 GDK_AVAILABLE_IN_ALL
diff --git a/gtk/gtkwidgetprivate.h b/gtk/gtkwidgetprivate.h
index 1b7ddf2..22dc342 100644
--- a/gtk/gtkwidgetprivate.h
+++ b/gtk/gtkwidgetprivate.h
@@ -158,8 +158,6 @@ struct _GtkWidgetPrivate
   GtkWidget *parent;
 
   GList *event_controllers;
-
-  AtkObject *accessible;
 };
 
 GtkCssNode *  gtk_widget_get_css_node       (GtkWidget *widget);
@@ -213,8 +211,6 @@ gboolean _gtk_widget_has_baseline_support (GtkWidget *widget);
 const gchar*      _gtk_widget_get_accel_path               (GtkWidget *widget,
                                                             gboolean  *locked);
 
-AtkObject *       _gtk_widget_peek_accessible              (GtkWidget *widget);
-
 void              _gtk_widget_set_has_default              (GtkWidget *widget,
                                                             gboolean   has_default);
 void              _gtk_widget_set_has_grab                 (GtkWidget *widget,
-- 
2.44.0

